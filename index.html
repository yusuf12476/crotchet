<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cheryl's Crochet</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Dancing Script & Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for social and profile icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            @apply bg-stone-50 text-gray-700;
        }
        .font-heading {
            font-family: 'Dancing Script', cursive;
        }
        .page-section {
            display: none;
            min-height: calc(100vh - 80px); /* Account for header */
        }
        .page-section.active {
            display: block;
        }
        .nav-link.active {
            @apply text-amber-800 border-b-2 border-amber-700 font-semibold;
        }
        .dropdown-menu {
            display: none;
        }
        .dropdown-menu.active {
            display: block;
        }
        /* Search Bar Overlay Styles */
        .search-bar {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            transform: translateY(-20px);
        }
        .search-bar.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        /* Checkout Modal Styles */
        #checkout-modal {
            display: none; /* Hidden by default */
        }
        #checkout-modal.active {
            display: flex; /* Show when active */
        }
        /* Quick View Modal Styles */
        #quick-view-modal {
            display: none; /* Hidden by default */
            overflow-y: auto; /* Allow vertical scrolling */        }
        #quick-view-modal.active {
            display: flex; /* Show when active */
        }
        /* Policy Modals */
        .policy-modal {
            display: none; /* Hidden by default */
        }
        .policy-modal.active {
            display: flex; /* Show when active */
        }
         /* FAQ Accordion */
        details > summary {
            list-style: none;
            cursor: pointer;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
        .details-plus-minus > summary::before {
            content: '+';
            font-weight: bold;
            display: inline-block;
            transition: transform 0.3s;
            margin-right: 0.5rem;
        }
        .details-plus-minus[open] > summary::before {
            content: '-';
            transform: rotate(180deg);
        }
        /* Featured Image Modal Styles */
        #featured-image-modal {
            display: none; /* Hidden by default */
        }
        #featured-image-modal.active {
            display: flex; /* Show when active */
        }
        /* Auth Modal Styles */
        #auth-modal {
            display: none; /* Hidden by default */
        }
        #auth-modal.active {
            display: flex; /* Show when active */
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header & Navigation -->
    <header class="bg-white shadow-lg py-4 fixed w-full top-0 z-50">
        <nav class="container mx-auto px-4 md:px-6 flex items-center justify-between">
            <!-- Logo -->
            <a href="#" class="text-3xl font-semibold text-amber-800 flex items-center font-heading" onclick="showPage('home-page'); return false;">
                <img src="images/Gemini_Generated_Image_vomy3bvomy3bvomy.png" alt="Cheryl's Crochet Logo" class="h-10 mr-2 rounded-full">
                Cheryl's Crochet
            </a>

            <!-- Desktop Nav Links -->
            <div class="hidden md:flex space-x-8 items-center">
                <a href="#" class="nav-link text-gray-600 hover:text-amber-700 transition-colors" data-page="home-page">Home</a>
                
                <!-- Learn Dropdown -->
                <div class="relative group">
                    <button class="nav-link text-gray-700 hover:text-amber-700 transition-colors flex items-center" onclick="toggleDropdown('learn-dropdown')">
                        Learn
                        <svg class="ml-1 h-4 w-4 transform transition-transform duration-200 group-hover:rotate-180" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                    </button>
                    <div id="learn-dropdown" class="absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 dropdown-menu">
                        <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-page="tutorials-page">Tutorials</a>
                        <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-page="blog-page">Blog</a>
                        <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-page="projects-page">Projects</a>
                        <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-page="about-page">About</a>
                        <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-page="faqs-page">FAQs</a>
                        <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-page="testimonials-page">Testimonials</a>
                        <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-page="contact-page">Contact</a>
                        <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-page="order-history-page">Order History</a>
                        <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-page="my-account-page">My Account</a>
                    </div>
                </div>

                <a href="#" class="nav-link text-gray-600 hover:text-amber-700 transition-colors" data-page="store-page">Store</a>
                <button id="search-button-desktop" onclick="toggleSearchBar()" class="text-gray-600 hover:text-amber-700 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </button>
                <button onclick="openAuthModal()" class="text-gray-600 hover:text-amber-700 transition-colors" title="Login/Register">
                    <i class="fas fa-user-circle fa-lg"></i>
                </button>
                <a href="#" class="nav-link relative flex items-center text-gray-600 hover:text-amber-700 transition-colors" data-page="wishlist-page">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5A5.4 5.4 0 017.5 3C9.35 3 11 4.13 12 5.6C13 4.13 14.65 3 16.5 3A5.4 5.4 0 0122 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>
                    <span id="wishlist-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </a>
                <a href="#" class="nav-link relative flex items-center bg-amber-700 text-white px-4 py-2 rounded-full hover:bg-amber-800 transition-colors" data-page="cart-page" title="Shopping Cart">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" /></svg>
                    <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </a>
            </div>
            
            <!-- Mobile Menu Button -->
            <button id="mobile-menu-button" class="md:hidden text-gray-700 focus:outline-none">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
            </button>
        </nav>
    </header>

    <!-- Mobile Menu (Hidden by default) -->
    <div id="mobile-menu-container" class="fixed inset-0 z-40 md:hidden hidden">
        <!-- Overlay -->
        <div id="mobile-menu-overlay" class="absolute inset-0 bg-black bg-opacity-50 transition-opacity duration-300 opacity-0"></div>
        
        <!-- Menu Panel -->
        <div id="mobile-menu" class="relative h-full w-3/4 max-w-sm bg-white shadow-lg transition-transform duration-300 transform -translate-x-full">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <a href="#" class="text-2xl font-semibold text-amber-800 font-heading" onclick="showPage('home-page'); return false;">Cheryl's Crochet</a>
                    <button id="mobile-menu-close-button" class="text-gray-600 hover:text-gray-900">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
                <nav class="flex flex-col space-y-4">
                    <a href="#" class="nav-link text-gray-600 hover:text-amber-700 text-lg" data-page="home-page">Home</a>
                    <div class="relative">
                        <button class="text-gray-600 hover:text-amber-700 text-lg flex items-center w-full justify-between" onclick="toggleDropdown('mobile-learn-dropdown')">
                            Learn
                            <svg class="ml-1 h-4 w-4 transform transition-transform duration-200" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                            </svg>
                        </button>
                        <div id="mobile-learn-dropdown" class="mt-2 space-y-2 pl-4 dropdown-menu">
                            <a href="#" class="nav-link block text-gray-700 hover:text-amber-600" data-page="tutorials-page">Tutorials</a>
                            <a href="#" class="nav-link block text-gray-700 hover:text-amber-600" data-page="blog-page">Blog</a>
                            <a href="#" class="nav-link block text-gray-700 hover:text-amber-600" data-page="projects-page">Projects</a>
                            <a href="#" class="nav-link block text-gray-700 hover:text-amber-600" data-page="about-page">About</a>
                            <a href="#" class="nav-link block text-gray-700 hover:text-amber-600" data-page="faqs-page">FAQs</a>
                            <a href="#" class="nav-link block text-gray-700 hover:text-amber-600" data-page="testimonials-page">Testimonials</a>
                            <a href="#" class="nav-link block text-gray-700 hover:text-amber-600" data-page="contact-page">Contact</a>
                            <a href="#" class="nav-link block text-gray-700 hover:text-amber-600" data-page="order-history-page">Order History</a>
                            <a href="#" class="nav-link block text-gray-700 hover:text-amber-600" data-page="my-account-page">My Account</a>
                        </div>
                    </svg>
                    </div>
                    <a href="#" class="nav-link text-gray-600 hover:text-amber-700 text-lg" data-page="store-page">Store</a>
                    <button id="search-button-mobile" onclick="toggleSearchBar()" class="flex items-center text-gray-600 hover:text-amber-700 text-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
                        <span>Search</span>
                    </button>
                    <a href="#" class="nav-link relative flex items-center text-gray-600 hover:text-amber-700 transition-colors text-lg" data-page="wishlist-page">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5A5.4 5.4 0 017.5 3C9.35 3 11 4.13 12 5.6C13 4.13 14.65 3 16.5 3A5.4 5.4 0 0122 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
                        <span>Wishlist</span>
                        <span id="mobile-wishlist-count" class="ml-auto bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                    </a>
                    <a href="#" class="nav-link relative flex items-center text-gray-600 hover:text-amber-700 transition-colors text-lg" data-page="cart-page" title="Shopping Cart">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" /></svg>
                        <span>Cart</span>
                        <span id="mobile-cart-count" class="ml-auto bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                    </a>
                    <button onclick="openAuthModal()" class="flex items-center text-gray-600 hover:text-amber-700 text-lg" title="Login/Register">
                        <i class="fas fa-user-circle fa-lg mr-2"></i>
                        <span>Login / Register</span>
                    </button>
                </nav>
            </div>
        </div>
    </div>

    <!-- Main Content Container -->
    <main class="flex-grow pt-20">
        <!-- Message Box -->
        <div id="message-box" class="fixed top-20 right-4 md:right-8 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg opacity-0 transition-opacity duration-300 z-[100]">
            Item added to cart!
        </div>

        <!-- Search Bar Overlay -->
        <div id="search-bar" class="search-bar fixed top-0 left-0 w-full h-full bg-white z-[100] flex items-center justify-center">
            <div class="container mx-auto px-4">
                <div class="flex items-center justify-center relative max-w-2xl mx-auto">
                    <input type="text" id="search-input" placeholder="Search for patterns, yarn, or tutorials..." class="w-full text-xl px-6 py-4 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-amber-500 transition-all">
                    <button id="close-search-button" onclick="toggleSearchBar()" class="absolute right-4 text-gray-500 hover:text-gray-800 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <div id="search-results" class="mt-8 text-center text-gray-500">
                    <!-- Search results will appear here -->
                </div>
            </div>
        </div>

        <!-- Home Page -->
        <section id="home-page" class="page-section active">
            <!-- Hero Section -->
            <div class="relative bg-cover bg-center min-h-screen flex items-center justify-center" style="background-image: url('images/IMG_6261.webp');">
                <div class="absolute inset-0 bg-gray-900 opacity-60"></div>
                <div class="container mx-auto text-center py-12 px-4 relative z-10 text-white">
                    <h1 class="text-6xl md:text-7xl font-extrabold leading-tight mb-4 font-heading">Crafting Joy, One Stitch at a Time.</h1>
                    <p class="text-xl md:text-2xl mb-8 max-w-3xl mx-auto">Discover a world of inspiration, patterns, and quality yarn to bring your crochet dreams to life.</p>
                    <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4">
                        <a href="#" data-page="store-page" class="nav-link bg-amber-700 text-white px-8 py-3 rounded-full font-semibold shadow-lg hover:bg-amber-800 transition-transform duration-200 hover:scale-105">Shop Yarn & Tools</a>
                        <a href="#" data-page="tutorials-page" class="nav-link bg-transparent text-white px-8 py-3 rounded-full font-semibold border-2 border-white hover:bg-white hover:text-amber-800 transition-all duration-200 hover:scale-105">Start Learning</a>
                    </div>
                </div>
            </div>
            
            <!-- Other home page content can go here -->
            <div class="container mx-auto p-4 md:p-8 bg-stone-50">
                <div class="py-12">
                     <h2 class="text-4xl font-bold text-center text-amber-800 mb-8 font-heading">Featured Projects</h2>
                     <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                         <div class="bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                             <img src="images/amigurumi bunny.webp" alt="Amigurumi Bunny" class="w-full h-48 object-cover cursor-pointer" onclick="openFeaturedImageModal('images/amigurumi bunny.webp')">
                             <div class="p-6">
                                 <h3 class="text-2xl font-semibold text-gray-800 font-heading">Amigurumi bunny</h3>
                                 <p class="text-gray-700 mt-2">A delightful pattern to create a huggable amigurumi bunny for your loved ones.</p>
                             </div>
                         </div>
                         <div class="bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                             <img src="images/waffle stitch blanket.jpg" alt="Waffle Stitch Blanket" class="w-full h-48 object-cover cursor-pointer" onclick="openFeaturedImageModal('images/waffle stitch blanket.jpg')">
                             <div class="p-6">
                                 <h3 class="text-2xl font-semibold text-gray-800 font-heading">Waffle Stitch Blanket</h3>
                                 <p class="text-gray-700 mt-2">Learn the beautiful texture of the waffle stitch to create this cozy throw.</p>
                             </div>
                         </div>
                         <div class="bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                             <img src="images/modern cardigan pattern.webp" alt="Crochet Cardigan" class="w-full h-48 object-cover cursor-pointer" onclick="openFeaturedImageModal('images/modern cardigan pattern.webp')">
                             <div class="p-6">
                                 <h3 class="text-2xl font-semibold text-gray-800 font-heading">Modern Cardigan Pattern</h3>
                                 <p class="text-gray-700 mt-2">A stylish and wearable piece that's easier to make than you think!</p>
                             </div>
                         </div>
                     </div>
                </div>
            </div>

            <!-- Best Sellers Section -->
            <div class="bg-white py-12">
                <div class="container mx-auto p-4 md:p-8">
                    <h2 class="text-4xl font-bold text-center text-amber-800 mb-8 font-heading">Our Best Sellers</h2>
                    <div id="best-sellers-list" class="grid grid-cols-2 md:grid-cols-4 gap-6">
                        <!-- Best seller products will be generated here by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Recently Viewed Section -->
            <div id="recently-viewed-section" class="bg-stone-50 py-12 hidden">
                <div class="container mx-auto p-4 md:p-8">
                    <h2 class="text-4xl font-bold text-center text-amber-800 mb-8 font-heading">Recently Viewed</h2>
                    <div id="recently-viewed-list" class="grid grid-cols-2 md:grid-cols-4 gap-6">
                        <!-- Recently viewed products will be generated here by JavaScript -->
                    </div>
                </div>
            </div>


        </section>

        <!-- About Page -->
        <section id="about-page" class="page-section p-4 md:p-8">
            <div class="container mx-auto py-12">
                <h2 class="text-5xl font-bold text-center text-amber-800 mb-6 font-heading">Our Story</h2>
                <div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-sm mb-12">
                    <p class="text-lg text-gray-700 mb-4">
                        Cheryl's Crochet was born from a simple passion: the joy of creating beautiful, handmade items with a hook and some yarn. What started as a personal hobby quickly grew into a desire to share this wonderful craft with others. We believe that crocheting is more than just a pastime; it's a form of therapy, a way to express creativity, and a means to connect with a global community of makers.
                    </p>
                    <p class="text-lg text-gray-700 mb-4">
                        Our mission is to provide high-quality materials, easy-to-follow tutorials, and endless inspiration for crocheters of all skill levels. Whether you're a complete beginner picking up a hook for the first time or a seasoned artisan looking for your next challenge, we're here to support you on your creative journey.
                    </p>
                    <p class="text-lg text-gray-700">
                        Thank you for being a part of our story. Let's create something beautiful together!
                    </p>
                </div>

                <!-- Meet the Founder -->
                <div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-sm mb-12">
                    <h3 class="text-4xl font-bold text-center text-amber-800 mb-8 font-heading">Meet Cheryl</h3>
                    <div class="flex flex-col md:flex-row items-center gap-8">
                        <img src="images/5945145365676279887(1).jpg" alt="Founder Cheryl" class="w-48 h-48 rounded-full object-cover shadow-lg">
                        <p class="text-lg text-gray-700">
                            Hi, I'm Cheryl! My grandmother taught me to crochet when I was ten, and I've been hooked ever since. For me, crochet is a way to slow down, be mindful, and create tangible warmth and love. I started this website to build a community where we can all share in that joy. When I'm not crocheting, you can find me tending to my garden or curled up with a good book and a cup of tea. I'm so glad you're here!
                        </p>
                    </div>
                </div>

                <!-- Our Philosophy -->
                <div class="max-w-4xl mx-auto">
                    <h3 class="text-4xl font-bold text-center text-amber-800 mb-8 font-heading">Our Philosophy</h3>
                    <div class="grid md:grid-cols-3 gap-8 text-center">
                        <div class="bg-white p-6 rounded-lg shadow-sm transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                            <div class="text-amber-700 mb-4"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/></svg></div>
                            <h4 class="text-2xl font-semibold text-gray-800 font-heading mb-2">Quality & Craftsmanship</h4>
                            <p class="text-gray-700">We source only the best yarns and tools, believing that quality materials lead to beautiful, lasting creations.</p>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-sm transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                            <div class="text-amber-700 mb-4"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg></div>
                            <h4 class="text-2xl font-semibold text-gray-800 font-heading mb-2">Community & Connection</h4>
                            <p class="text-gray-700">We're more than a store; we're a community of makers, here to support and inspire one another on our creative journeys.</p>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-sm transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                            <div class="text-amber-700 mb-4"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/></svg></div>
                            <h4 class="text-2xl font-semibold text-gray-800 font-heading mb-2">Inspiration & Education</h4>
                            <p class="text-gray-700">From beginner tutorials to advanced patterns, we are dedicated to providing the resources you need to grow your skills.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Video Tutorials Page -->
        <section id="tutorials-page" class="page-section p-4 md:p-8 bg-stone-50">
            <div class="container mx-auto py-12">
                <h2 class="text-5xl font-bold text-center text-amber-800 mb-8 font-heading">Video Tutorials</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Tutorial 1 -->
                    <div class="bg-white rounded-lg shadow-sm p-4 transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                        <div class="aspect-w-16 aspect-h-9 mb-4 overflow-hidden rounded-lg">
                            <iframe class="w-full h-full" src="https://www.youtube.com/embed/a-W22v-Q7eU" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                        <h3 class="text-3xl font-semibold text-gray-800 mb-2 font-heading">Beginner's Guide to Single Crochet</h3>
                        <p class="text-gray-700">Learn the fundamental stitch that forms the basis of countless projects. Perfect for first-time crocheters!</p>
                    </div>
                    <!-- Tutorial 2 -->
                    <div class="bg-white rounded-lg shadow-sm p-4 transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                        <div class="aspect-w-16 aspect-h-9 mb-4 overflow-hidden rounded-lg">
                            <iframe class="w-full h-full" src="https://www.youtube.com/embed/U3l0_Q7dC2c" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                        <h3 class="text-3xl font-semibold text-gray-800 mb-2 font-heading">How to Read a Crochet Pattern</h3>
                        <p class="text-gray-700">Demystify the language of patterns with our step-by-step guide. You'll be reading patterns like a pro in no time!</p>
                    </div>
                    <!-- Tutorial 3 -->
                    <div class="bg-white rounded-lg shadow-sm p-4 transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                        <div class="aspect-w-16 aspect-h-9 mb-4 overflow-hidden rounded-lg">
                            <iframe class="w-full h-full" src="https://www.youtube.com/embed/5F2o3rD57iE" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                        <h3 class="text-3xl font-semibold text-gray-800 mb-2 font-heading">Crocheting a Magic Ring</h3>
                        <p class="text-gray-700">The perfect start for any amigurumi or round project. Master this technique for seamless joins.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Blog Page -->
        <section id="blog-page" class="page-section p-4 md:p-8 bg-stone-50">
            <div class="container mx-auto py-12">
                <h2 class="text-5xl font-bold text-center text-amber-800 mb-8 font-heading">Our Blog</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Blog Post 1 -->
                    <div class="bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                        <img src="images/5 must have hooks for crotchet.webp" alt="Blog post image" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-3xl font-semibold text-gray-800 mb-2 font-heading">5 Must-Have Hooks for Every Crocheter</h3>
                            <p class="text-gray-700 mb-4">Choosing the right hook can make all the difference. We break down the top five hooks you should add to your collection.</p>
                            <a href="#" onclick="showPage('blog-post-1'); return false;" class="text-amber-800 font-semibold hover:underline">Read More &rarr;</a>
                        </div>
                    </div>
                    <!-- Blog Post 2 -->
                    <div class="bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                        <img src="images/images (1).jpg" alt="Blog post image" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-3xl font-semibold text-gray-800 mb-2 font-heading">The Best Yarn for Amigurumi</h3>
                            <p class="text-gray-700 mb-4">Making stuffed toys? We've got the scoop on the perfect yarn types, weights, and fibers for creating adorable amigurumi.</p>
                            <a href="#" onclick="showPage('blog-post-2'); return false;" class="text-amber-800 font-semibold hover:underline">Read More &rarr;</a>
                        </div>
                    </div>
                    <!-- Blog Post 3 -->
                    <div class="bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
                        <img src="images/images.jpg" alt="Blog post image" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-3xl font-semibold text-gray-800 mb-2 font-heading">Getting Started with Crochet Blankets</h3>
                            <p class="text-gray-700 mb-4">Your first big project doesn't have to be intimidating! Our guide will walk you through everything you need to know.</p>
                            <a href="#" onclick="showPage('blog-post-3'); return false;" class="text-amber-800 font-semibold hover:underline">Read More &rarr;</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Blog Post 1 Page -->
        <section id="blog-post-1" class="page-section p-4 md:p-8 bg-stone-50">
            <div class="container mx-auto py-12">
                <div class="max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-sm">
                    <img src="images/5 must have hooks for crotchet.webp" alt="A collection of different crochet hooks" class="w-full h-auto object-cover rounded-lg mb-8">
                    <h2 class="text-5xl font-bold text-amber-800 mb-4 font-heading">5 Must-Have Hooks for Every Crocheter</h2>
                    <p class="text-gray-500 mb-6">Published on September 25, 2024 by Cheryl</p>
                    <div class="prose lg:prose-xl max-w-none text-gray-700 space-y-4">
                        <p>Choosing the right crochet hook can transform your crafting experience. A good hook feels comfortable in your hand, glides smoothly through yarn, and helps you maintain even tension. But with so many options available—aluminum, bamboo, ergonomic, tapered, inline—where do you start? Here are our top five must-have hooks for every crocheter's toolkit.</p>
                        
                        <h3 class="text-3xl font-semibold text-gray-800 font-heading">1. The Ergonomic Handle Hook</h3>
                        <p>If you spend hours crocheting, an ergonomic hook is a game-changer. These hooks feature a larger, soft-grip handle that reduces strain on your hands and wrists. Brands like Clover Amour and Tulip Etimo are famous for their comfortable designs, making them a worthy investment for any serious crafter.</p>

                        <h3 class="text-3xl font-semibold text-gray-800 font-heading">2. The Classic Aluminum Hook</h3>
                        <p>Simple, affordable, and reliable. The classic aluminum hook (like those from Susan Bates or Boye) is a staple. They are lightweight, and the yarn slides effortlessly over their smooth surface. They come in a vast range of sizes and are perfect for beginners and experts alike.</p>

                        <h3 class="text-3xl font-semibold text-gray-800 font-heading">3. The Warm Bamboo Hook</h3>
                        <p>For those who prefer natural materials, bamboo hooks are a fantastic choice. They are incredibly lightweight and warm to the touch. Some crocheters find that bamboo provides a bit more grip on the yarn, which can be helpful for slippery fibers like silk or bamboo yarn.</p>

                        <h3 class="text-3xl font-semibold text-gray-800 font-heading">4. The Precision Steel Hook</h3>
                        <p>When working with fine crochet thread for projects like doilies, lace, or delicate jewelry, a steel hook is essential. These tiny, durable hooks are designed to work with thin threads and create intricate, detailed stitch work that larger hooks can't handle.</p>

                        <h3 class="text-3xl font-semibold text-gray-800 font-heading">5. A Set of Interchangeable Hooks</h3>
                        <p>An interchangeable set is the ultimate tool for versatility. These sets typically come with multiple hook heads in various sizes that can be attached to a single handle. This is not only space-saving but also allows you to find the perfect combination of handle and hook size for your comfort.</p>
                    </div>
                    <div class="mt-8 border-t pt-6">
                        <a href="#" onclick="showPage('blog-page'); return false;" class="text-amber-800 font-semibold hover:underline">&larr; Back to Blog</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Blog Post 2 Page -->
        <section id="blog-post-2" class="page-section p-4 md:p-8 bg-stone-50">
            <div class="container mx-auto py-12">
                <div class="max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-sm">
                    <img src="images/images (1).jpg" alt="Colorful yarn suitable for amigurumi" class="w-full h-auto object-cover rounded-lg mb-8">
                    <h2 class="text-5xl font-bold text-amber-800 mb-4 font-heading">The Best Yarn for Amigurumi</h2>
                    <p class="text-gray-500 mb-6">Published on September 20, 2024 by Cheryl</p>
                    <div class="prose lg:prose-xl max-w-none text-gray-700 space-y-4">
                        <p>Amigurumi, the Japanese art of crocheting small, stuffed creatures, requires a specific type of yarn to achieve that perfect, neat look. The right yarn should have excellent stitch definition, be durable, and come in a vibrant array of colors. Here’s our guide to the best yarns for your amigurumi projects.</p>
                        
                        <h3 class="text-3xl font-semibold text-gray-800 font-heading">1. 100% Cotton Yarn</h3>
                        <p>Cotton is the king of amigurumi yarn. It's not very stretchy, which means your stitches will be tight and well-defined, preventing the stuffing from showing through. It's also strong, holds its shape well, and is available in a massive range of colors. Look for mercerized cotton for a beautiful sheen and even better stitch definition.</p>

                        <h3 class="text-3xl font-semibold text-gray-800 font-heading">2. Acrylic Yarn</h3>
                        <p>Acrylic is another popular and budget-friendly choice. It's hypoallergenic, durable, and machine washable, making it great for toys intended for children. While some acrylics can be a bit fuzzy, many modern acrylic yarns are soft and smooth, providing good results for amigurumi.</p>

                        <h3 class="text-3xl font-semibold text-gray-800 font-heading">3. Wool Yarn</h3>
                        <p>While less common for amigurumi, wool can create wonderfully soft and cuddly toys. It has a natural elasticity that can be forgiving, but it can also make it harder to get very tight stitches. Wool is also great for "felting" your amigurumi to create a unique, seamless fabric look.</p>
                    </div>
                    <div class="mt-8 border-t pt-6">
                        <a href="#" onclick="showPage('blog-page'); return false;" class="text-amber-800 font-semibold hover:underline">&larr; Back to Blog</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Blog Post 3 Page -->
        <section id="blog-post-3" class="page-section p-4 md:p-8 bg-stone-50">
            <div class="container mx-auto py-12">
                <div class="max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-sm">
                    <img src="images/images.jpg" alt="A cozy, partially finished crochet blanket" class="w-full h-auto object-cover rounded-lg mb-8">
                    <h2 class="text-5xl font-bold text-amber-800 mb-4 font-heading">Getting Started with Crochet Blankets</h2>
                    <p class="text-gray-500 mb-6">Published on September 15, 2024 by Cheryl</p>
                    <div class="prose lg:prose-xl max-w-none text-gray-700 space-y-4">
                        <p>A crochet blanket is often one of the first large-scale projects a new crocheter tackles. It's a rewarding and practical item to make, but it can also feel intimidating. Don't worry! With a few tips, you'll be on your way to creating a cozy, beautiful blanket.</p>
                        
                        <h3 class="text-3xl font-semibold text-gray-800 font-heading">1. Choose the Right Yarn and Hook</h3>
                        <p>For your first blanket, choose a chunky or bulky weight yarn. It works up much faster, which is incredibly motivating! Pair it with a large hook (check the yarn label for recommendations). A soft, machine-washable acrylic or a cotton blend is a great, low-maintenance choice.</p>

                        <h3 class="text-3xl font-semibold text-gray-800 font-heading">2. Start with a Simple Stitch</h3>
                        <p>You don't need a complex stitch to make a beautiful blanket. Simple stitches like single crochet, half-double crochet, or double crochet create a lovely fabric. The "granny stripe" or "corner-to-corner" (C2C) patterns are also fantastic for beginners and create a stunning visual effect.</p>

                        <h3 class="text-3xl font-semibold text-gray-800 font-heading">3. Make a Gauge Swatch</h3>
                        <p>It might seem like a chore, but making a small test square (a gauge swatch) is crucial. It helps you see if your tension is right and allows you to calculate how big your final blanket will be and how much yarn you'll need. It's better to spend 20 minutes on a swatch than to run out of yarn halfway through!</p>
                    </div>
                    <div class="mt-8 border-t pt-6">
                        <a href="#" onclick="showPage('blog-page'); return false;" class="text-amber-800 font-semibold hover:underline">&larr; Back to Blog</a>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Crochet Projects Page -->
        <section id="projects-page" class="page-section p-4 md:p-8 bg-stone-50">
            <div class="container mx-auto py-12">
                <h2 class="text-5xl font-bold text-center text-amber-800 mb-8 font-heading">Inspiration Gallery</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">
                    <!-- Project 1 -->
                    <div class="relative group rounded-lg overflow-hidden shadow-md">
                        <img src="images/granny square bag.jpg" alt="Crochet project image" class="w-full h-full object-cover transform transition-transform duration-300 group-hover:scale-105">
                        <div class="absolute inset-0 bg-black bg-opacity-50 flex items-end opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <div class="p-4 text-white">
                                <h3 class="text-xl font-semibold font-heading">Granny Square Bag</h3>
                                <p class="text-base">A classic and colorful tote bag.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Project 2 -->
                    <div class="relative group rounded-lg overflow-hidden shadow-md">
                        <img src="images/amigurumi bunny.webp" alt="Crochet project image" class="w-full h-full object-cover transform transition-transform duration-300 group-hover:scale-105">
                        <div class="absolute inset-0 bg-black bg-opacity-50 flex items-end opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <div class="p-4 text-white">
                                <h3 class="text-xl font-semibold font-heading">Amigurumi Bunny</h3>
                                <p class="text-base">An adorable and huggable toy.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Project 3 -->
                    <div class="relative group rounded-lg overflow-hidden shadow-md">
                        <img src="images/chunky throw blanket.jpg" alt="Crochet project image" class="w-full h-full object-cover transform transition-transform duration-300 group-hover:scale-105">
                        <div class="absolute inset-0 bg-black bg-opacity-50 flex items-end opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <div class="p-4 text-white">
                                <h3 class="text-xl font-semibold font-heading">Chunky Throw Blanket</h3>
                                <p class="text-base">Perfect for cozying up on the couch.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Project 4 -->
                    <div class="relative group rounded-lg overflow-hidden shadow-md">
                        <img src="images/crotchet plant hanger.jpg" alt="Crochet project image" class="w-full h-full object-cover transform transition-transform duration-300 group-hover:scale-105">
                        <div class="absolute inset-0 bg-black bg-opacity-50 flex items-end opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <div class="p-4 text-white">
                                <h3 class="text-xl font-semibold font-heading">Crochet Plant Hanger</h3>
                                <p class="text-base">A stylish way to display your greenery.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Project 5 -->
                    <div class="relative group rounded-lg overflow-hidden shadow-md">
                        <img src="images/chevron scarf.webp" alt="Crochet project image" class="w-full h-full object-cover transform transition-transform duration-300 group-hover:scale-105">
                        <div class="absolute inset-0 bg-black bg-opacity-50 flex items-end opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <div class="p-4 text-white">
                                <h3 class="text-xl font-semibold font-heading">Chevron Scarf</h3>
                                <p class="text-base">Classic design with a modern twist.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Project 6 -->
                    <div class="relative group rounded-lg overflow-hidden shadow-md">
                        <img src="images/crotchet coaster.jpg" alt="Crochet project image" class="w-full h-full object-cover transform transition-transform duration-300 group-hover:opacity-100">
                        <div class="absolute inset-0 bg-black bg-opacity-50 flex items-end opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <div class="p-4 text-white">
                                <h3 class="text-xl font-semibold font-heading">Crochet Coasters</h3>
                                <p class="text-base">Quick and easy project for beginners.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Store Page -->
        <section id="store-page" class="page-section p-4 md:p-8 bg-stone-50">
            <div class="container mx-auto py-12">
                <!-- New Arrivals Section -->
                <div class="mb-16 relative">
                    <div class="flex justify-between items-center mb-8">
                        <h2 class="text-5xl font-bold text-amber-800 font-heading">New Arrivals</h2>
                        <div class="flex space-x-2">
                            <button id="new-arrivals-prev" class="bg-white border border-amber-700 text-amber-700 rounded-full w-10 h-10 flex items-center justify-center hover:bg-amber-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"><i class="fas fa-chevron-left"></i></button>
                            <button id="new-arrivals-next" class="bg-white border border-amber-700 text-amber-700 rounded-full w-10 h-10 flex items-center justify-center hover:bg-amber-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                    <div id="new-arrivals-container" class="overflow-x-hidden">
                        <div id="new-arrivals-list" class="flex gap-6 transition-transform duration-500 ease-in-out">
                            <!-- New arrivals will be generated here by JavaScript -->
                        </div>
                    </div>
                </div>
                <!-- All Products Section with Filters -->
                <div class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
                    <h2 id="all-products-heading" class="text-5xl font-bold text-amber-800 font-heading mb-4 md:mb-0">All Products</h2>
                    <div class="flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto">
                        <!-- Product Search -->
                        <div class="relative w-full sm:w-auto">
                            <input type="text" id="product-search-input" placeholder="Search products..." class="w-full sm:w-64 px-4 py-2 border rounded-lg focus:ring focus:ring-amber-200 focus:outline-none pr-10">
                            <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                            </span>
                        </div>
                        <!-- Sort Filter -->
                        <div class="flex items-center w-full sm:w-auto">
                            <label for="sort-filter" class="mr-2 text-gray-700 font-medium">Sort by:</label>
                            <select id="sort-filter" class="w-full px-4 py-2 border rounded-lg focus:ring focus:ring-amber-200 focus:outline-none bg-white">
                                <option value="default">Default</option>
                                <option value="price-asc">Price: Low to High</option>
                                <option value="price-desc">Price: High to Low</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div id="category-filters" class="flex flex-wrap justify-center gap-2 mb-8">
                    <!-- Category filter buttons will be generated here -->
                </div>

                <div id="product-list" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    <!-- All products will be generated here by JavaScript -->
                </div>
                <div id="pagination-controls" class="flex justify-center items-center space-x-2 mt-12">
                    <!-- Pagination controls will be generated here -->
                </div>
            </div>
        </section>
        
        <!-- Wishlist Page -->
        <section id="wishlist-page" class="page-section p-4 md:p-8 bg-stone-50">
            <div class="container mx-auto py-12">
                <h2 class="text-5xl font-bold text-center text-amber-800 mb-8 font-heading">Your Wishlist</h2>
                <div id="wishlist-items-container" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    <!-- Wishlist items will be generated here by JavaScript -->
                </div>
            </div>
        </section>


        <!-- Shopping Cart Page -->
        <section id="cart-page" class="page-section p-4 md:p-8 bg-stone-50">
            <div class="container mx-auto py-12">
                <h2 class="text-5xl font-bold text-center text-amber-800 mb-8 font-heading">Your Shopping Cart</h2>
                <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-sm p-6">
                    <div id="cart-items-container">
                        <!-- Cart items will be generated here by JavaScript -->
                    </div>
                    <div id="cart-summary" class="mt-8 border-t border-gray-200 pt-6 flex flex-col items-end">
                        <div class="text-lg font-semibold text-gray-800">
                            Subtotal: <span id="cart-subtotal">Ksh 0.00</span>
                        </div>
                        <div class="text-xl font-bold text-amber-800 mt-2">
                            Total: <span id="cart-total">Ksh 0.00</span>
                        </div>
                        <div class="flex flex-col md:flex-row items-end md:items-center space-y-2 md:space-y-0 md:space-x-4 mt-6">
                             <button onclick="clearCart()" class="bg-red-500 text-white px-6 py-3 rounded-full font-semibold hover:bg-red-600 transition-colors w-full md:w-auto">
                                Clear Cart
                            </button>
                            <button onclick="checkout()" class="bg-amber-700 text-white px-8 py-3 rounded-full font-semibold hover:bg-amber-800 transition-colors w-full md:w-auto">
                                Proceed to Checkout
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- FAQs Page -->
        <section id="faqs-page" class="page-section p-4 md:p-8 bg-stone-50">
            <div class="container mx-auto py-12">
                <h2 class="text-5xl font-bold text-center text-amber-800 mb-8 font-heading">Frequently Asked Questions</h2>
                <div class="max-w-3xl mx-auto space-y-6">
                    <details class="bg-white p-6 rounded-lg shadow-sm details-plus-minus">
                        <summary class="text-xl font-semibold text-gray-800 flex justify-between items-center">
                            How do I choose the right yarn for my project?
                        </summary>
                        <p class="mt-4 text-gray-700">The best yarn depends on your project! For wearable items, consider soft fibers like merino wool or cotton. For things that need to hold their shape, such as amigurumi, acrylic or worsted-weight cotton is a great choice.</p>
                    </details>
                    <details class="bg-white p-6 rounded-lg shadow-sm details-plus-minus">
                        <summary class="text-xl font-semibold text-gray-800 flex justify-between items-center">
                            Do you offer patterns for beginners?
                        </summary>
                        <p class="mt-4 text-gray-700">Yes! Our tutorials section has a variety of patterns perfect for beginners, focusing on foundational stitches like single crochet and double crochet. We also have a beginner's crochet kit in our store.</p>
                    </details>
                    <details class="bg-white p-6 rounded-lg shadow-sm details-plus-minus">
                        <summary class="text-xl font-semibold text-gray-800 flex justify-between items-center">
                            What is the best way to care for my finished crochet items?
                        </summary>
                        <p class="mt-4 text-gray-700">We recommend checking the yarn label for specific care instructions. Generally, hand washing and air-drying is the best way to preserve the shape and quality of your handmade items. Avoid machine washing and high heat unless the yarn is specifically marked as machine-washable.</p>
                    </details>
                </div>
            </div>
        </section>

        <!-- Testimonials Page -->
        <section id="testimonials-page" class="page-section p-4 md:p-8 bg-stone-50">
            <div class="container mx-auto py-12">
                <h2 class="text-5xl font-bold text-center text-amber-800 mb-8 font-heading">What Our Customers Say</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Testimonial 1 -->
                    <div class="bg-white rounded-lg shadow-sm p-6 flex flex-col items-center text-center">
                        <img src="https://placehold.co/80x80/D4F2F2/black?text=JD" alt="Customer avatar" class="rounded-full w-20 h-20 object-cover mb-4">
                        <p class="italic text-lg text-gray-700 mb-4">"Cheryl's tutorials are so clear and easy to follow. I went from never touching a hook to finishing my first blanket in just a month!"</p>
                        <h4 class="font-bold text-amber-800">- Jane D.</h4>
                    </div>
                    <!-- Testimonial 2 -->
                    <div class="bg-white rounded-lg shadow-sm p-6 flex flex-col items-center text-center">
                        <img src="https://placehold.co/80x80/F2E8D4/black?text=MK" alt="Customer avatar" class="rounded-full w-20 h-20 object-cover mb-4">
                        <p class="italic text-lg text-gray-700 mb-4">"The yarn quality is exceptional. It's so soft and a joy to work with. My projects have never looked better."</p>
                        <h4 class="font-bold text-amber-800">- Mark K.</h4>
                    </div>
                    <!-- Testimonial 3 -->
                    <div class="bg-white rounded-lg shadow-sm p-6 flex flex-col items-center text-center">
                        <img src="https://placehold.co/80x80/E8F2D4/black?text=LC" alt="Customer avatar" class="rounded-full w-20 h-20 object-cover mb-4">
                        <p class="italic text-lg text-gray-700 mb-4">"I love the inspiration gallery! It always gives me new ideas and reminds me why I love this craft. The patterns are so creative."</p>
                        <h4 class="font-bold text-amber-800">- Linda C.</h4>
                    </div>
                </div>
            </div>
        </section>

        <!-- Order History Page -->
        <section id="order-history-page" class="page-section p-4 md:p-8 bg-stone-50">
            <div class="container mx-auto py-12">
                <h2 class="text-5xl font-bold text-center text-amber-800 mb-8 font-heading">Your Order History</h2>
                <div id="order-history-container" class="max-w-4xl mx-auto space-y-8">
                    <!-- Order history will be generated here by JavaScript -->
                </div>
            </div>
        </section>

        <!-- My Account Page -->
        <section id="my-account-page" class="page-section p-4 md:p-8 bg-stone-50">
            <div class="container mx-auto py-12">
                <h2 class="text-5xl font-bold text-center text-amber-800 mb-8 font-heading">My Account</h2>
                <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Left Sidebar for Navigation -->
                    <div class="md:col-span-1 bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-2xl font-bold text-gray-800 mb-4 font-heading">Navigation</h3>
                        <nav class="flex flex-col space-y-3">
                            <a href="#" onclick="showPage('order-history-page'); return false;" class="text-gray-700 hover:text-amber-700 font-semibold flex items-center"><i class="fas fa-receipt fa-fw mr-3"></i>Order History</a>
                            <a href="#" onclick="showPage('wishlist-page'); return false;" class="text-gray-700 hover:text-amber-700 font-semibold flex items-center"><i class="fas fa-heart fa-fw mr-3"></i>My Wishlist</a>
                            <a href="#" onclick="logout()" class="text-red-600 hover:text-red-800 font-semibold flex items-center"><i class="fas fa-sign-out-alt fa-fw mr-3"></i>Logout</a>
                        </nav>
                    </div>

                    <!-- Right Content Area -->
                    <div class="md:col-span-2 bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6 font-heading">Account Details</h3>
                        <form id="account-details-form" class="space-y-4">
                            <div>
                                <label for="account-name" class="block text-gray-700 font-medium mb-1">Name</label>
                                <input type="text" id="account-name" class="w-full px-4 py-2 border rounded-lg bg-gray-100 focus:bg-white focus:ring focus:ring-amber-200 focus:outline-none" value="Cheryl Maina" required>
                            </div>
                            <div>
                                <label for="account-email" class="block text-gray-700 font-medium mb-1">Email</label>
                                <input type="email" id="account-email" class="w-full px-4 py-2 border rounded-lg bg-gray-100 focus:bg-white focus:ring focus:ring-amber-200 focus:outline-none" value="cheryl@example.com" required>
                            </div>
                            <div>
                                <label for="account-password" class="block text-gray-700 font-medium mb-1">New Password (optional)</label>
                                <input type="password" id="account-password" class="w-full px-4 py-2 border rounded-lg bg-gray-100 focus:bg-white focus:ring focus:ring-amber-200 focus:outline-none" placeholder="Leave blank to keep current password">
                            </div>
                            <button type="submit" class="w-full bg-amber-700 text-white px-6 py-3 rounded-full font-semibold hover:bg-amber-800 transition-colors">
                                Update Details
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </section>



        <!-- Contact Page -->
        <section id="contact-page" class="page-section p-4 md:p-8 bg-stone-50">
            <div class="container mx-auto py-12">
                <h2 class="text-5xl font-bold text-center text-amber-800 mb-8 font-heading">Contact Us</h2>
                <div class="max-w-3xl mx-auto bg-white rounded-lg shadow-sm p-6 md:p-8">
                    <p class="text-center text-xl text-gray-700 mb-6">
                        We'd love to hear from you! Whether you have a question about a pattern, need help with an order, or just want to share your latest creation, feel free to reach out.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-800 mb-4">Get in Touch</h3>
                            <form id="contact-form" class="space-y-4">
                                <div>
                                    <label for="contact-name" class="block text-gray-700 font-medium mb-1">Name</label>
                                    <input type="text" id="contact-name" class="w-full px-4 py-2 border rounded-lg focus:ring focus:ring-amber-200 focus:outline-none" placeholder="Your Name" required>
                                </div>
                                <div>
                                    <label for="contact-email" class="block text-gray-700 font-medium mb-1">Email</label>
                                    <input type="email" id="contact-email" class="w-full px-4 py-2 border rounded-lg focus:ring focus:ring-amber-200 focus:outline-none" placeholder="you@example.com" required>
                                </div>
                                <div>
                                    <label for="contact-message" class="block text-gray-700 font-medium mb-1">Message</label>
                                    <textarea id="contact-message" rows="5" class="w-full px-4 py-2 border rounded-lg focus:ring focus:ring-amber-200 focus:outline-none" placeholder="Your message..." required></textarea>
                                </div>
                                <button type="submit" class="w-full bg-amber-700 text-white px-6 py-3 rounded-full font-semibold hover:bg-amber-800 transition-colors">
                                    Send Message
                                </button>
                            </form>
                        </div>
                        <div>
                            <h3 class="text-2xl font-bold text-gray-800 mb-4">Our Details</h3>
                            <div class="space-y-4 text-gray-700">
                                <div class="flex items-center">
                                    <i class="fas fa-map-marker-alt text-amber-700 mr-4"></i>
                                    <span>MURAMATI ROAD, JUJA, KIAMBU</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-phone-alt text-amber-700 mr-4"></i>
                                    <span>0769012520</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-envelope text-amber-700 mr-4"></i>
                                    <a href="mailto:info@cheryls-crochet.com" class="hover:text-amber-800">info@cheryls-crochet.com</a>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-clock text-amber-700 mr-4"></i>
                                    <span>Mon-Fri: 9am - 5pm</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Checkout Modal -->
        <div id="checkout-modal" class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-60 z-[100] items-center justify-center p-4">
            <div class="bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-2xl w-full relative">
                <button onclick="closeCheckoutModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
                <h3 class="text-3xl font-bold text-amber-800 mb-4 font-heading">Finalize Your Order</h3>
                <p class="text-gray-700 mb-6">Please review your order below and choose a method to send it to us. We will contact you to confirm payment and shipping details.</p>
                <div id="checkout-summary" class="border-t border-b border-gray-200 py-4 mb-6 max-h-64 overflow-y-auto">
                    <!-- Checkout summary will be injected here -->
                </div>
                <div class="flex flex-col md:flex-row gap-4">
                    <a id="whatsapp-link" href="#" onclick="finalizeOrder(event)" target="_blank" class="flex-1 text-center bg-green-500 text-white px-6 py-3 rounded-full font-semibold hover:bg-green-600 transition-colors flex items-center justify-center gap-2"><i class="fab fa-whatsapp"></i> Send via WhatsApp</a>
                    <a id="email-link" href="#" onclick="finalizeOrder(event)" class="flex-1 text-center bg-blue-500 text-white px-6 py-3 rounded-full font-semibold hover:bg-blue-600 transition-colors flex items-center justify-center gap-2"><i class="fas fa-envelope"></i> Send via Email</a>
                </div>
            </div>
        </div>

        <!-- Auth Modal (Login/Register) -->
        <div id="auth-modal" class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-60 z-[100] items-center justify-center p-4">
            <div class="bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-md w-full relative">
                <button onclick="closeAuthModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>

                <!-- Login Form -->
                <div id="login-form-container">
                    <h3 class="text-3xl font-bold text-amber-800 mb-6 font-heading text-center">Login</h3>
                    <form id="login-form" class="space-y-4">
                        <div>
                            <label for="login-email" class="block text-gray-700 font-medium mb-1">Email</label>
                            <input type="email" id="login-email" class="w-full px-4 py-2 border rounded-lg focus:ring focus:ring-amber-200 focus:outline-none" placeholder="you@example.com" required>
                        </div>
                        <div>
                            <label for="login-password" class="block text-gray-700 font-medium mb-1">Password</label>
                            <input type="password" id="login-password" class="w-full px-4 py-2 border rounded-lg focus:ring focus:ring-amber-200 focus:outline-none" placeholder="••••••••" required>
                        </div>
                        <button type="submit" class="w-full bg-amber-700 text-white px-6 py-3 rounded-full font-semibold hover:bg-amber-800 transition-colors">Login</button>
                    </form>
                    <p class="text-center text-gray-600 mt-4">
                        Don't have an account? <a href="#" onclick="switchAuthView('register'); return false;" class="text-amber-700 font-semibold hover:underline">Sign up</a>
                    </p>
                </div>

                <!-- Register Form (hidden by default) -->
                <div id="register-form-container" style="display: none;">
                    <h3 class="text-3xl font-bold text-amber-800 mb-6 font-heading text-center">Create Account</h3>
                    <form id="register-form" class="space-y-4">
                        <div>
                            <label for="register-name" class="block text-gray-700 font-medium mb-1">Name</label>
                            <input type="text" id="register-name" class="w-full px-4 py-2 border rounded-lg focus:ring focus:ring-amber-200 focus:outline-none" placeholder="Your Name" required>
                        </div>
                        <div>
                            <label for="register-email" class="block text-gray-700 font-medium mb-1">Email</label>
                            <input type="email" id="register-email" class="w-full px-4 py-2 border rounded-lg focus:ring focus:ring-amber-200 focus:outline-none" placeholder="you@example.com" required>
                        </div>
                        <div>
                            <label for="register-password" class="block text-gray-700 font-medium mb-1">Password</label>
                            <input type="password" id="register-password" class="w-full px-4 py-2 border rounded-lg focus:ring focus:ring-amber-200 focus:outline-none" placeholder="••••••••" required>
                        </div>
                        <button type="submit" class="w-full bg-amber-700 text-white px-6 py-3 rounded-full font-semibold hover:bg-amber-800 transition-colors">Create Account</button>
                    </form>
                    <p class="text-center text-gray-600 mt-4">
                        Already have an account? <a href="#" onclick="switchAuthView('login'); return false;" class="text-amber-700 font-semibold hover:underline">Login</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- Quick View Modal -->
        <div id="quick-view-modal" class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-60 z-[100] justify-center p-4">
            <div class="bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-4xl w-full relative my-auto">
                <button onclick="closeQuickView()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
                <div id="quick-view-content" class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Quick view content will be injected here -->
                </div> 
            </div>
        </div>

        <!-- Policy Modals -->
        <!-- Privacy Policy Modal -->
        <div id="privacy-policy-modal" class="policy-modal fixed top-0 left-0 w-full h-full bg-black bg-opacity-60 z-[100] items-center justify-center p-4">
            <div class="bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-3xl w-full relative max-h-[90vh] overflow-y-auto">
                <button onclick="closePolicyModal('privacy-policy-modal')" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
                <h3 class="text-3xl font-bold text-amber-800 mb-4 font-heading">Privacy Policy</h3>
                <div class="space-y-4 text-gray-700">
                    <p><strong>Last Updated: 9/25/2025</strong></p>
                    <p>Cheryl's Crochet ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website.</p>
                    <h4 class="text-xl font-semibold">Information We Collect</h4>
                    <p>We may collect personal information such as your name, email address, and message content when you use our contact form. When you place an order, we collect information necessary to process that order, which may include your name, contact details, and order details.</p>
                    <h4 class="text-xl font-semibold">How We Use Your Information</h4>
                    <p>We use the information we collect to: respond to your inquiries, process your orders, improve our website and services, and send you marketing communications if you opt-in.</p>
                    <h4 class="text-xl font-semibold">Sharing Your Information</h4>
                    <p>We do not sell, trade, or otherwise transfer your personally identifiable information to outside parties. This does not include trusted third parties who assist us in operating our website or servicing you, so long as those parties agree to keep this information confidential.</p>
                    <h4 class="text-xl font-semibold">Your Rights</h4>
                    <p>You have the right to request access to the personal data we hold about you, to request corrections, and to request deletion of your data. Please contact us to make such a request.</p>
                </div>
            </div>
        </div>

        <!-- Cookie Policy Modal -->
        <div id="cookie-policy-modal" class="policy-modal fixed top-0 left-0 w-full h-full bg-black bg-opacity-60 z-[100] items-center justify-center p-4">
            <div class="bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-3xl w-full relative max-h-[90vh] overflow-y-auto">
                <button onclick="closePolicyModal('cookie-policy-modal')" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
                <h3 class="text-3xl font-bold text-amber-800 mb-4 font-heading">Cookie Policy</h3>
                <div class="space-y-4 text-gray-700">
                    <p><strong>Last Updated: 9/25/2025</strong></p>
                    <p>This website uses cookies to enhance your browsing experience. A cookie is a small text file stored on your device.</p>
                    <h4 class="text-xl font-semibold">How We Use Cookies</h4>
                    <ul class="list-disc list-inside">
                        <li><strong>Essential Cookies:</strong> These are necessary for the website to function, such as keeping items in your shopping cart.</li>
                        <li><strong>Performance Cookies:</strong> These help us understand how visitors interact with our website by collecting information anonymously.</li>
                        <li><strong>Functionality Cookies:</strong> These are used to recognize you when you return to our website and remember your preferences.</li>
                    </ul>
                    <h4 class="text-xl font-semibold">Your Choices</h4>
                    <p>Most web browsers allow some control of most cookies through the browser settings. You can set your browser to refuse all or some browser cookies, or to alert you when websites set or access cookies. If you disable or refuse cookies, please note that some parts of this website may become inaccessible or not function properly.</p>
                </div>
            </div>
        </div>

        <!-- Terms of Service Modal -->
        <div id="terms-of-service-modal" class="policy-modal fixed top-0 left-0 w-full h-full bg-black bg-opacity-60 z-[100] items-center justify-center p-4">
            <div class="bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-3xl w-full relative max-h-[90vh] overflow-y-auto">
                <button onclick="closePolicyModal('terms-of-service-modal')" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
                <h3 class="text-3xl font-bold text-amber-800 mb-4 font-heading">Terms of Service</h3>
                <div class="space-y-4 text-gray-700">
                    <p><strong>Last Updated: 9/25/2025</strong></p>
                    <p>By accessing and using this website, you accept and agree to be bound by the terms and provision of this agreement.</p>
                    <h4 class="text-xl font-semibold">Intellectual Property</h4>
                    <p>The Site and its original content, features, and functionality (including but not limited to all information, text, patterns, and images) are owned by Cheryl's Crochet and are protected by international copyright and other intellectual property laws.</p>
                    <h4 class="text-xl font-semibold">User Conduct</h4>
                    <p>You agree not to use the website for any unlawful purpose or any purpose prohibited under this clause. You agree not to use the website in any way that could damage the website, services, or general business of Cheryl's Crochet.</p>
                    <h4 class="text-xl font-semibold">Limitation of Liability</h4>
                    <p>In no event shall Cheryl's Crochet, nor any of its officers, directors, and employees, be held liable for anything arising out of or in any way connected with your use of this website.</p>
                </div>
            </div>
        </div>

        <!-- Featured Image Modal -->
        <div id="featured-image-modal" class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-80 z-[100] items-center justify-center p-4">
            <button onclick="closeFeaturedImageModal()" class="absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-10">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
            <div class="max-w-4xl max-h-[90vh] w-full h-full flex items-center justify-center" onclick="closeFeaturedImageModal()">
                <img id="featured-modal-img" src="" alt="Featured Project Full Size" class="max-w-full max-h-full object-contain rounded-lg shadow-2xl" onclick="event.stopPropagation()">
            </div>
        </div>


    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-300 py-12">
        <div class="container mx-auto px-4 md:px-6 grid grid-cols-1 md:grid-cols-4 gap-8">
            <!-- Footer Section 1: Logo & Description -->
            <div class="mb-6 md:mb-0">
                <a href="#" class="text-3xl font-semibold text-amber-500 flex items-center mb-4 font-heading" onclick="showPage('home-page'); return false;">
                    <img src="images/Gemini_Generated_Image_vomy3bvomy3bvomy.png" alt="Cheryl's Crochet Logo" class="h-10 mr-2 rounded-full">
                    Cheryl's Crochet
                </a>
                <p class="text-sm">Bringing the joy of crochet to your hands with quality materials and endless inspiration.</p>
            </div>

            <!-- Footer Section 2: Navigation -->
            <div>
                <h4 class="text-xl font-semibold text-white mb-4">Quick Links</h4>
                <ul class="space-y-2">
                    <li><a href="#" class="nav-link hover:text-white transition-colors" data-page="home-page">Home</a></li>
                    <li><a href="#" class="nav-link hover:text-white transition-colors" data-page="store-page">Shop</a></li>
                    <li><a href="#" class="nav-link hover:text-white transition-colors" data-page="tutorials-page">Tutorials</a></li>
                    <li><a href="#" class="nav-link hover:text-white transition-colors" data-page="blog-page">Blog</a></li>
                    <li><a href="#" class="nav-link hover:text-white transition-colors" data-page="about-page">About Us</a></li>
                    <li><a href="#" class="nav-link hover:text-white transition-colors" data-page="faqs-page">FAQs</a></li>
                    <li><a href="#" class="nav-link hover:text-white transition-colors" data-page="testimonials-page">Testimonials</a></li>
                    <li><a href="#" class="nav-link hover:text-white transition-colors" data-page="contact-page">Contact</a></li>
                </ul>
            </div>

            <!-- Footer Section 3: Connect with Us -->
            <div>
                <h4 class="text-xl font-semibold text-white mb-4">Connect</h4>
                <div class="flex space-x-4 mb-4">
                    <a href="#" class="text-gray-400 hover:text-white transition-colors"><i class="fab fa-facebook-f fa-2x"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors"><i class="fab fa-instagram fa-2x"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors"><i class="fab fa-pinterest-p fa-2x"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors"><i class="fab fa-youtube fa-2x"></i></a>
                </div>
                <h4 class="text-xl font-semibold text-white mb-2">Newsletter</h4>
                <p class="text-sm mb-2">Stay updated with our latest patterns!</p>
                <form action="#" method="post" class="flex">
                    <input type="email" placeholder="Your email" class="w-full p-2 rounded-l-lg text-gray-800 focus:outline-none">
                    <button type="submit" class="bg-amber-700 text-white p-2 rounded-r-lg hover:bg-amber-800 transition-colors">Sign Up</button>
                </form>
            </div>

            <!-- Footer Section 4: Contact -->
            <div>
                <h4 class="text-xl font-semibold text-white mb-4">Contact</h4>
                <p class="text-sm">MURAMATI ROAD, JUJA , KIAMBU</p>
                <p class="text-sm">Email: <a href="mailto:info@cheryls-crochet.com" class="hover:text-white">info@cheryls-crochet.com</a></p>
                <p class="text-sm">Phone: 0769012520</p>
            </div>
        </div>

        <!-- Bottom Copyright Section -->
        <div class="border-t border-gray-700 mt-8 pt-6 text-center text-sm text-gray-500">
            <div class="flex justify-center space-x-4 mb-4">
                <a href="#" onclick="openPolicyModal('terms-of-service-modal'); return false;" class="hover:text-white">Terms of Service</a>
                <span>&bull;</span>
                <a href="#" onclick="openPolicyModal('privacy-policy-modal'); return false;" class="hover:text-white">Privacy Policy</a>
                <span>&bull;</span>
                <a href="#" onclick="openPolicyModal('cookie-policy-modal'); return false;" class="hover:text-white">Cookie Policy</a>
            </div>
            <p>&copy; 2024 Cheryl's Crochet. All rights reserved.</p>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="back-to-top-btn" class="hidden fixed bottom-8 right-8 bg-amber-700 text-white w-12 h-12 rounded-full shadow-lg items-center justify-center text-xl hover:bg-amber-800 transition-opacity duration-300 z-50">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
        // --- Core Application Logic ---
        const pageSections = document.querySelectorAll('.page-section');
        const navLinks = document.querySelectorAll('.nav-link');
        const mobileMenuContainer = document.getElementById('mobile-menu-container');
        const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenuCloseButton = document.getElementById('mobile-menu-close-button');
        const messageBox = document.getElementById('message-box');
        
        let currentPage = 1;
        const ITEMS_PER_PAGE = 8;

        // A simple, static cart and wishlist for demonstration
        const cartItems = [];
        const wishlistItems = [];
        let orderHistory = [];
        let recentlyViewedIds = [];
        const products = [
            { id: 1, name: "Merino Wool Yarn", price: 1875.00, imageUrl: "images/merino wool yan.webp", isNew: true, category: "Yarn & Tools", description: "Luxuriously soft and warm, this 100% merino wool yarn is perfect for sweaters, scarves, and baby blankets. Available in a variety of rich colors." },
            { id: 2, name: "Bamboo Crochet Hook Set", price: 3750.00, imageUrl: "images/bamboo crotchet hook set.webp", isNew: false, category: "Yarn & Tools", description: "A complete set of lightweight and ergonomic bamboo crochet hooks. Sizes range from 2mm to 10mm, all stored in a beautiful fabric case." },
            { id: 3, name: "Cotton Yarn Skein", price: 1300.00, imageUrl: "images/cotton yarn skein.jpg", isNew: false, category: "Yarn & Tools", description: "Durable and breathable 100% cotton yarn. Ideal for dishcloths, market bags, and summer garments. Machine washable for easy care." },
            { id: 4, name: "Stitch Markers (Pack of 20)", price: 750.00, imageUrl: "images/stitch markers.jpg", isNew: true, category: "Yarn & Tools", description: "Never lose your place again! This pack of 20 locking stitch markers comes in assorted colors to help you keep track of your stitches and rows." },
            { id: 5, name: "Beginner's Crochet Kit", price: 6750.00, imageUrl: "images/beginners crotchet kit.jpg", isNew: false, category: "Kits", description: "Everything you need to start your crochet journey. This kit includes a set of hooks, several balls of yarn, stitch markers, a yarn needle, and a beginner's pattern book.", isBestSeller: true },
            { id: 6, name: "Acrylic Yarn Ball", price: 950.00, imageUrl: "images/acrylic yarn ball.jpg", isNew: false, category: "Yarn & Tools", description: "A versatile and affordable acrylic yarn that's great for a wide range of projects, from blankets to amigurumi. Hypoallergenic and easy to care for." },
            { id: 7, name: "Yarn Needle Set", price: 525.00, imageUrl: "images/yarn needle set.jpg", isNew: true, category: "Yarn & Tools", description: "A set of three blunt-tipped yarn needles in various sizes. Essential for weaving in ends and seaming your finished crochet projects." },
            { id: 8, name: "Crochet Pattern Book", price: 2700.00, imageUrl: "images/crotchet patternbook.jpg", isNew: false, category: "Patterns", description: "A collection of 15 modern and stylish crochet patterns, from accessories to home decor. Includes detailed instructions and beautiful photography." },
            { id: 9, name: "Winter Scarf", price: 2500.00, imageUrl: "images/winter scarf.jpeg", isNew: true, category: "Apparel", description: "A cozy and stylish handmade winter scarf to keep you warm during the cold season. Made with soft, chunky yarn.", colors: ["Red", "Navy", "Charcoal", "Cream"] },
            { id: 10, name: "Lace Shawl", price: 3200.00, imageUrl: "images/lace shawl.webp", isNew: false, category: "Apparel", description: "An elegant and intricate lace shawl, perfect for special occasions or as a light wrap. A beautiful and delicate accessory.", colors: ["Ivory", "Silver", "Dusty Rose", "Black"] },
            { id: 11, name: "Fingerless Gloves", price: 1500.00, imageUrl: "images/fingerless glove.png", isNew: false, category: "Apparel", description: "Keep your hands warm while keeping your fingers free. These stylish fingerless gloves are perfect for cool days.", sizes: ["S", "M", "L"], colors: ["Gray", "Black", "Brown"] },
            { id: 12, name: "Soft Baby Blanket", price: 4500.00, imageUrl: "images/soft baby blanket.webp", isNew: true, category: "Home Goods", description: "A wonderfully soft and gentle baby blanket, handmade with hypoallergenic yarn. The perfect gift for a newborn.", isBestSeller: true, colors: ["Baby Pink", "Sky Blue", "Mint Green", "Yellow"] },
            { id: 13, name: "Amigurumi Octopus", price: 1800.00, imageUrl: "images/octopus.webp", isNew: false, category: "Toys", description: "A cute and cuddly amigurumi octopus toy. Lovingly handmade and safe for children." },
            { id: 14, name: "Tote Bag", price: 2800.00, imageUrl: "images/tote bag.heic", isNew: false, category: "Accessories", description: "A sturdy and fashionable crochet tote bag, perfect for carrying your essentials, from groceries to yarn." },
            { id: 15, name: "Elegant Long Skirt", price: 3500.00, imageUrl: "images/loong skkirt.jpg", isNew: true, category: "Apparel", description: "A beautiful and flowing long crochet skirt, perfect for a touch of handmade elegance.", sizes: ["S", "M", "L", "XL"], colors: ["Burgundy", "Forest Green", "Navy"] },
            { id: 16, name: "Breezy Long Summer Skirt", price: 3800.00, imageUrl: "images/long skirt.jpg", isNew: true, category: "Apparel", description: "Light and airy, this long summer skirt is perfect for warm days and beach outings.", sizes: ["S", "M", "L"], colors: ["White", "Aqua", "Coral"] },
            { id: 17, name: "Classic Halter Top", price: 2200.00, imageUrl: "images/halter top.webp", isNew: true, category: "Apparel", description: "A stylish and classic crochet halter top, a versatile addition to your summer wardrobe.", isBestSeller: true, sizes: ["XS", "S", "M", "L"], colors: ["Black", "White", "Red", "Teal"] },
            { id: 18, name: "Chic Short Skirt", price: 2500.00, imageUrl: "images/skirrt.jpg", isNew: true, category: "Apparel", description: "A fun and flirty short crochet skirt, great for a casual day out or a festival look.", sizes: ["S", "M", "L"], colors: ["White", "Black", "Beige"] },
            { id: 19, name: "Stylish Split Jumper", price: 4200.00, imageUrl: "images/slipt jumper.jpg", isNew: true, category: "Apparel", description: "A modern and comfortable crochet split jumper, combining style and coziness.", sizes: ["S", "M", "L"], colors: ["Oatmeal", "Gray", "Black"] },
            { id: 20, "name": "Light Summer Skirt", price: 2800.00, imageUrl: "images/summer skirt.jpg", isNew: true, category: "Apparel", description: "An essential piece for your summer collection, this light crochet skirt is both cute and comfortable.", sizes: ["S", "M", "L"], colors: ["Pastel Yellow", "Lavender", "White"] },
            { id: 21, name: "Handmade Key Holder", price: 800.00, imageUrl: "images/key holder.jpg", isNew: true, category: "Accessories", description: "A charming and practical handmade key holder. A perfect small gift or accessory." },
            { id: 22, name: "Backless Halter Top", price: 2400.00, imageUrl: "images/backless halter top.jpg", isNew: true, category: "Apparel", description: "A stunning backless halter top for a bold and beautiful summer statement.", sizes: ["XS", "S", "M", "L"], colors: ["Black", "Emerald", "Fuchsia"] },
            { id: 23, name: "Boho Summer Top", price: 2300.00, imageUrl: "images/summer top.jpg", isNew: true, category: "Apparel", description: "A light and breezy boho-style summer top, perfect for pairing with skirts or shorts.", sizes: ["S", "M", "L"], colors: ["Cream", "Terracotta", "Olive"] },
            { id: 24, name: "Festival Halter Top", price: 2250.00, imageUrl: "images/halter top.png", isNew: true, category: "Apparel", description: "Another gorgeous take on the classic halter top, ready for any festival or sunny day.", sizes: ["S", "M", "L"], colors: ["Rainbow", "Gold", "Silver"] },
            { id: 25, name: "Playful Short Skirt", price: 2600.00, imageUrl: "images/skirt.jpg", isNew: true, category: "Apparel", description: "A second style of our popular short skirt, featuring a unique stitch pattern.", sizes: ["S", "M", "L"], colors: ["Blue", "Pink", "Green"] },
            { id: 26, name: "Floral Key Holder", price: 850.00, imageUrl: "images/key chain.webp", isNew: true, category: "Accessories", description: "Keep your keys organized with this beautiful floral-themed crochet key holder." },
            { id: 27, name: "Amigurumi Key Holder", price: 900.00, imageUrl: "images/key chain.jpg", isNew: true, category: "Accessories", description: "A cute amigurumi character key holder that adds a touch of fun to your keys." },
            { id: 28, name: "Classic Sweater Vest", price: 2800.00, imageUrl: "images/checkboard sweater vest.jpg", isNew: true, category: "Apparel", description: "A timeless and stylish crochet sweater vest. Perfect for layering over a shirt for a chic, academic look.", sizes: ["S", "M", "L", "XL"], colors: ["Black/White", "Brown/Cream", "Green/White"] },
            { id: 29, name: "90pc Crochet Hook Set", price: 4500.00, imageUrl: "images/90pc hook set.webp", isNew: true, category: "Yarn & Tools", description: "A massive 90-piece crochet hook set with ergonomic handles, steel hooks, and various accessories. Perfect for any project." },
            { id: 30, name: "100pc Deluxe Crochet Hook Set", price: 5200.00, imageUrl: "images/100 pc hook set.jpg", isNew: true, category: "Yarn & Tools", description: "The ultimate 100-piece crochet set, including every hook size you'll ever need, plus stitch markers, needles, and a premium case.", colors: ["Multi-color", "Pastel", "Classic"] },
            { id: 31, name: "Crochet Storage Bag", price: 2800.00, imageUrl: "images/crotchet storage bag.jpg", isNew: true, category: "Accessories", description: "Keep your yarn, hooks, and projects organized with this durable and stylish crochet storage bag. Multiple compartments for all your needs." },
            { id: 32, name: "Wooden Yarn Holder", price: 1800.00, imageUrl: "images/yaarn holder.jpg", isNew: true, category: "Yarn & Tools", description: "A beautifully crafted wooden yarn holder that allows your yarn to spin freely, preventing tangles and knots as you work." },
            { id: 33, name: "Ceramic Yarn Bowl", price: 2200.00, imageUrl: "images/yarn holder.jpg", isNew: false, category: "Yarn & Tools", description: "An elegant ceramic yarn bowl to keep your yarn clean and in place. A functional piece of art for your crafting space." },
            { id: 34, name: "Travel Yarn Holder", price: 1500.00, imageUrl: "images/yaaaarn holder.jpg", isNew: true, category: "Yarn & Tools", description: "A lightweight and portable yarn holder, perfect for crocheting on the go. Fits easily in your project bag." },
            { id: 35, name: "Ultimate Crochet Kit", price: 7500.00, imageUrl: "images/kit with bag.jpg", isNew: true, category: "Kits", description: "Our most comprehensive kit yet! Includes a deluxe hook set, premium yarn selection, storage bag, and exclusive patterns." },
            { id: 36, name: "Amigurumi Starter Kit", price: 4800.00, imageUrl: "images/kiit.jpg", isNew: false, category: "Kits", description: "Dive into the world of amigurumi with this all-in-one kit. Contains colorful cotton yarn, safety eyes, stuffing, and beginner-friendly patterns." },
            { id: 37, name: "Cozy Cardigan", price: 4800.00, imageUrl: "images/cardigan.jpg", isNew: true, category: "Apparel", description: "A warm and stylish handmade crochet cardigan. The perfect layering piece for any season, made with soft, chunky yarn.", sizes: ["S/M", "L/XL"], colors: ["Cream", "Mustard", "Gray"] },
            { id: 38, name: "Lace-Trim Cardigan", price: 5200.00, imageUrl: "images/cardigan 2.jpg", isNew: false, category: "Apparel", description: "An elegant, lightweight cardigan featuring beautiful lace trim details. Perfect for adding a touch of handmade sophistication to your outfit.", sizes: ["S", "M", "L"], colors: ["White", "Black", "Dusty Pink"] },
            { id: 39, name: "Boho Bikini Set", price: 3500.00, imageUrl: "images/bikiini set.webp", isNew: true, category: "Apparel", description: "A stunning, handmade boho-style crochet bikini set. Perfect for beach days and festivals. Lined for comfort and fit.", sizes: ["S", "M", "L"], colors: ["Natural", "Black", "Olive Green"], reviews: [{name: "Sarah L.", rating: 5, comment: "Absolutely love this bikini! So well made and comfortable."}, {name: "Jessica P.", rating: 4, comment: "Beautiful design, fits great. A little pricey but worth it."}] },
            { id: 40, name: "Classic Triangle Bikini Set", price: 3200.00, imageUrl: "images/bikini set.jpg", isNew: true, category: "Apparel", description: "A timeless triangle-top crochet bikini set. Adjustable ties ensure a perfect fit for fun in the sun.", sizes: ["S", "M", "L"], colors: ["Red", "Blue", "Yellow"], reviews: [{name: "Emily R.", rating: 5, comment: "Perfect for summer, very stylish and good quality."}, {name: "David M.", rating: 3, comment: "Bought for my girlfriend, she liked it. Material is a bit thin."}] },
            { id: 41, name: "Boho Beach bikini", price: 3800.00, imageUrl: "images/bikini top.jpg", isNew: true, category: "Apparel", description: "A beautiful and breezy crochet beach cover-up. Perfect for wearing over your bikini on a sunny day.", sizes: ["One Size"], colors: ["White", "Black", "Beige"] },
            { id: 42, name: "Granny Square Tote Bag", price: 3200.00, imageUrl: "images/tote bag 4.jpg", isNew: true, category: "Accessories", description: "A vibrant and stylish tote bag made from classic granny squares. A spacious and eye-catching accessory." },
            { id: 43, name: "Market Tote Bag", price: 2900.00, imageUrl: "images/tote bag 1.webp", isNew: true, category: "Accessories", description: "A durable and expandable market tote, perfect for trips to the farmer's market or grocery store." },
            { id: 44, name: "Sunflower Tote Bag", price: 3400.00, imageUrl: "images/tote bag 6.jpg", isNew: true, category: "Accessories", description: "Brighten your day with this cheerful sunflower-themed tote bag. A beautiful and functional piece of art.", isBestSeller: true },
            { id: 45, name: "Striped Beach Tote", price: 3100.00, imageUrl: "images/tote bag 2.webp", isNew: true, category: "Accessories", description: "A classic, nautical-striped tote bag that's large enough for your towel, sunscreen, and a good book." },
            { id: 46, name: "Minimalist Net Tote", price: 2600.00, imageUrl: "images/minimalist tote.webp", isNew: true, category: "Accessories", description: "A lightweight and chic net tote bag. Folds up small, making it perfect for travel and impromptu shopping." },
            { id: 47, name: "Everyday Shoulder Tote", price: 3000.00, imageUrl: "images/tote bag 3.webp", isNew: true, category: "Accessories", description: "A simple yet elegant shoulder tote for everyday use. Sturdy, stylish, and practical." },
            { id: 48, name: "Lightweight Shoulder Shrug", price: 2800.00, imageUrl: "images/shoulder shrug.webp", isNew: true, category: "Apparel", description: "A delicate and lightweight shoulder shrug, perfect for layering over a dress or top on a cool evening.", sizes: ["S/M", "L/XL"], colors: ["White", "Black", "Gray"] },
            { id: 49, name: "Summer Dress with Top Set", price: 5500.00, imageUrl: "images/dress with top.jpg", isNew: true, category: "Apparel", description: "A gorgeous matching set featuring a crochet top and a flowing summer dress. The perfect coordinated outfit.", sizes: ["S", "M", "L"], colors: ["White/Blue", "Cream/Green", "Yellow/White"] },
            { id: 50, name: "Easy Summer Halter Dress", price: 4200.00, imageUrl: "images/beach wear.jpg", isNew: true, category: "Apparel", description: "An easy-to-wear and breezy summer halter dress. Effortlessly stylish for warm weather.", sizes: ["S", "M", "L"], colors: ["Aqua", "Coral", "Black"] },
            { id: 51, name: "Half Sleeve Shrug", price: 3200.00, imageUrl: "images/half sleeve shrug.jpg", isNew: true, category: "Apparel", description: "A versatile half-sleeve shrug that adds a touch of handmade charm to any outfit. Great for all seasons.", sizes: ["S/M", "L/XL"], colors: ["Beige", "Maroon", "Navy"] },
            { id: 52, name: "Chunky Sleeve Shrug", price: 3800.00, imageUrl: "images/chunky sleeve shrug.jpg", isNew: true, category: "Apparel", description: "Make a statement with this cozy and fashionable chunky sleeve shrug. Perfect for a bold, modern look.", sizes: ["One Size"], colors: ["Cream", "Charcoal", "Blush"] },
            { id: 53, name: "Breezy Summer set", price: 4800.00, imageUrl: "images/easy summer wear.webp", isNew: true, category: "Apparel", description: "An effortlessly chic and comfortable crochet jumpsuit. The perfect one-piece outfit for any summer occasion.", sizes: ["S", "M", "L"], colors: ["White", "Navy Stripe", "Beige"] }
            ,
            { id: 54, name: "Lacy Summer Bralette", price: 2500.00, imageUrl: "images/lacy summer bralette.jpg", isNew: true, category: "Apparel", description: "A delicate and lacy bralette, perfect for layering under sheer tops or wearing on its own.", sizes: ["S", "M", "L"], colors: ["White", "Black", "Nude"] },
            { id: 55, name: "Crochet Bell Bottoms", price: 5800.00, imageUrl: "images/crotchet bell bottoms.jpg", isNew: true, category: "Apparel", description: "Make a retro statement with these stunning crochet bell bottom pants. Intricate design for a true boho vibe.", sizes: ["S", "M", "L"], colors: ["Cream", "Black", "Brown"] },
            { id: 56, name: "Off-Shoulder Crop Top", price: 2600.00, imageUrl: "images/off shoulder crop top.jpg", isNew: true, category: "Apparel", description: "A flirty and fun off-the-shoulder crop top. Pairs perfectly with high-waisted skirts or pants.", sizes: ["XS", "S", "M", "L"], colors: ["White", "Yellow", "Red"] },
            { id: 57, name: "Fringed Festival Vest", price: 3200.00, imageUrl: "images/festival vest.jpg", isNew: false, category: "Apparel", description: "The ultimate festival accessory. This long, fringed vest adds movement and style to any outfit.", sizes: ["One Size"], colors: ["Brown", "Black", "Cream"] },
            { id: 58, name: "High-Waisted Shorts", price: 2800.00, imageUrl: "images/high waisted short.png", isNew: true, category: "Apparel", description: "Comfortable and stylish high-waisted crochet shorts. Great for warm weather and casual outings.", sizes: ["S", "M", "L"], colors: ["Denim Blue", "White", "Black"] },
            { id: 59, name: "Slouchy Beanie Hat", price: 1800.00, imageUrl: "images/slouch beanie hat.jpg", isNew: false, category: "Accessories", description: "A classic slouchy beanie to keep you warm and stylish. Made with soft, breathable yarn.", colors: ["Gray", "Black", "Burgundy", "Forest Green"] },
            { id: 60, name: "Mandala Wall Hanging", price: 4200.00, imageUrl: "images/madala wall hanging.jpg", isNew: true, category: "Home Goods", description: "Add a touch of bohemian elegance to your home with this intricate mandala wall hanging." },
            { id: 61, name: "One-Piece Swimsuit", price: 4500.00, imageUrl: "images/one piece swim suit.jpg", isNew: true, category: "Apparel", description: "A stunning and unique crochet one-piece swimsuit with side cutouts. A true beach showstopper.", sizes: ["S", "M", "L"], colors: ["Black", "White", "Red"] },
            { id: 62, name: "Patchwork Cardigan", price: 6500.00, imageUrl: "images/patchwork cardigan.jpg", isNew: true, category: "Apparel", description: "A vibrant and artistic patchwork cardigan, made from various granny squares. A wearable piece of art.", isBestSeller: true, sizes: ["S/M", "L/XL"] },
            { id: 63, name: "Crochet Headband", price: 1200.00, imageUrl: "images/headband.webp", isNew: false, category: "Accessories", description: "A wide, comfortable crochet headband to keep your hair in place with a touch of boho style.", colors: ["Mustard", "Teal", "Maroon"] },
            { id: 64, name: "Baby Booties", price: 1500.00, imageUrl: "images/baby booties.jpg", isNew: true, category: "Apparel", description: "Adorable and soft handmade baby booties. The perfect gift for a baby shower.", sizes: ["0-3m", "3-6m", "6-12m"], colors: ["White", "Pink", "Blue"] },
            { id: 65, name: "Hooded Scarf (Scoodie)", price: 3500.00, imageUrl: "images/Hooded-Crochet-Scarf-2-480x600.jpg", isNew: false, category: "Apparel", description: "Stay extra cozy with this combination hooded scarf. A practical and fashionable winter accessory.", colors: ["Gray", "Black", "Cream"] },
            { id: 66, name: "Round Placemat Set", price: 2800.00, imageUrl: "images/placemat.webp", isNew: true, category: "Home Goods", description: "A set of four beautiful, handmade crochet placemats to elevate your dining table setting." },
            { id: 67, name: "Lace-Up Corset Top", price: 3200.00, imageUrl: "images/lace up corset top.webp", isNew: true, category: "Apparel", description: "A trendy and adjustable lace-up corset top. Perfect for a night out or a festival look.", sizes: ["S", "M", "L"], colors: ["Black", "White", "Burgundy"] },
            { id: 68, name: "Colorblock Sweater", price: 5200.00, imageUrl: "images/color block sweater.jpg", isNew: true, category: "Apparel", description: "A modern and bold colorblock sweater. Chunky, warm, and effortlessly stylish.", sizes: ["S", "M", "L", "XL"] },
            { id: 69, name: "Mini Skirt with Fringe", price: 2900.00, imageUrl: "images/mini skirt with fringe.jpg", isNew: true, category: "Apparel", description: "A fun and playful mini skirt with a fringe hemline. Great for dancing and festivals.", sizes: ["S", "M", "L"], colors: ["Tan", "Black", "White"] },
            { id: 70, name: "Sun Hat", price: 3300.00, imageUrl: "images/sun hat.png", isNew: false, category: "Accessories", description: "A wide-brimmed crochet sun hat to protect you from the sun in style. Perfect for the beach or garden.", colors: ["Natural", "White", "Black"] },
            { id: 71, name: "Crochet Romper", price: 4800.00, imageUrl: "images/romper.jpg", isNew: true, category: "Apparel", description: "An easy and chic one-piece crochet romper. The perfect outfit for a summer day.", sizes: ["S", "M", "L"], colors: ["White", "Navy", "Olive"] },
            { id: 72, "name": "Turtleneck Poncho", price: 4500.00, imageUrl: "images/crochet-turtleneck-poncho-free-pattern-7-534x801.jpg.webp", isNew: false, category: "Apparel", description: "A cozy and elegant turtleneck poncho. The perfect layering piece for autumn and winter.", sizes: ["One Size"], colors: ["Gray", "Camel", "Black"] },
            { id: 73, name: "Pillow Cover Set", price: 4000.00, imageUrl: "images/pillowcoverset.jpg", isNew: true, category: "Home Goods", description: "A set of two decorative crochet pillow covers to add texture and warmth to your living space." },
            { id: 74, name: "Halter Neck Jumpsuit", price: 6200.00, imageUrl: "images/jumpsuit.webp", isNew: true, category: "Apparel", description: "A sophisticated and stunning halter neck jumpsuit with wide legs. Perfect for a special occasion.", sizes: ["S", "M", "L"], colors: ["Black", "White", "Royal Blue"] },
            { id: 75, name: "Crochet Tie", price: 1500.00, imageUrl: "images/tie.jpg", isNew: false, category: "Accessories", description: "A unique and quirky handmade crochet tie. A great conversation starter and a fun gift." },
            { id: 76, name: "Butterfly Top", price: 2400.00, imageUrl: "images/butterfly top.jpg", isNew: true, category: "Apparel", description: "A whimsical and beautiful butterfly-shaped halter top. A favorite for festivals and summer parties.", isBestSeller: true, sizes: ["S", "M", "L"], colors: ["Purple", "Blue", "Pink", "Rainbow"] },
            { id: 77, name: "Maxi Skirt", price: 5500.00, imageUrl: "images/maxi skirt.png", isNew: false, category: "Apparel", description: "A long and flowing crochet maxi skirt. Elegant, comfortable, and perfect for a bohemian look.", sizes: ["S", "M", "L"], colors: ["Cream", "Black", "Rust"] },
            { id: 78, name: "Blanket Making Kit", price: 8500.00, imageUrl: "images/blanket making kit.jpg", isNew: true, category: "Kits", description: "Everything you need to create your own cozy throw blanket. Includes chunky yarn, a large hook, and a pattern." },
            { id: 79, name: "Long Sleeve Crop Top", price: 2900.00, imageUrl: "images/longsleeve crop top.jpg", isNew: true, category: "Apparel", description: "A versatile long-sleeve crop top. Can be dressed up or down for any season.", sizes: ["S", "M", "L"], colors: ["Black", "White", "Gray", "Brown"] },
            { id: 80, name: "Crochet Backpack", price: 4800.00, imageUrl: "images/back pack.webp", isNew: false, category: "Accessories", description: "A sturdy and stylish handmade crochet backpack. Perfect for carrying your essentials on the go." },
            { id: 81, name: "Cable Knit Sweater", price: 5800.00, imageUrl: "images/cable knit sweater.jpg", isNew: true, category: "Apparel", description: "A classic and timeless cable knit crochet sweater. A warm and sophisticated addition to your wardrobe.", sizes: ["S", "M", "L", "XL"], colors: ["Cream", "Navy", "Forest Green"] },
            { id: 82, name: "Table Runner", price: 3800.00, imageUrl: "images/table runner.jpg", isNew: true, category: "Home Goods", description: "A beautiful, long crochet table runner to add a touch of handmade elegance to your dining room." },
            { id: 83, name: "High-Neck Dress", price: 6000.00, imageUrl: "images/highneck dress.jpg", isNew: true, category: "Apparel", description: "An elegant and form-fitting high-neck crochet dress. Perfect for an evening event or special dinner.", sizes: ["S", "M", "L"], colors: ["Black", "Red", "White"] },
            { id: 84, name: "Cat Ear Beanie", price: 1900.00, imageUrl: "images/cat ear beanie.jpg", isNew: false, category: "Apparel", description: "A cute and playful beanie with cat ears. A fun accessory for all ages.", colors: ["Black", "Pink", "Gray"] },
            { id: 85, name: "Triangle Scarf / Shawlette", price: 2800.00, imageUrl: "images/triangular scarf.jpg", isNew: true, category: "Accessories", description: "A versatile triangle scarf that can be worn in multiple ways. Lightweight and perfect for layering.", colors: ["Ombre Blue", "Sunset", "Forest Greens"] },
            { id: 86, name: "Button-Up Shirt", price: 4500.00, imageUrl: "images/button up shirt.jpg", isNew: true, category: "Apparel", description: "A unique crochet take on the classic button-up shirt. Breathable and stylish.", sizes: ["S", "M", "L", "XL"], colors: ["White", "Beige", "Light Blue"] },
            { id: 87, name: "Hanging Fruit Basket", price: 2500.00, imageUrl: "images/hanging-basket-garlic.webp", isNew: false, category: "Home Goods", description: "A multi-tiered hanging basket, perfect for storing fruits and vegetables in your kitchen." },
            { id: 88, name: "Bolero Jacket", price: 3400.00, imageUrl: "images/bolero jacket.webp", isNew: true, category: "Apparel", description: "A short, open-front bolero jacket. The perfect finishing touch for a sleeveless dress or top.", sizes: ["S", "M", "L"], colors: ["Black", "White", "Red"] },
            { id: 89, name: "Sock Pattern & Yarn Kit", price: 3200.00, imageUrl: "images/sock pattern and yarn kit.webp", isNew: false, category: "Kits", description: "Learn to make your own cozy socks! This kit includes soft sock yarn, a pattern, and the right-sized hooks." },
            { id: 90, name: "Mermaid Tail Blanket", price: 6500.00, imageUrl: "images/mermaid blanket.jpg", isNew: true, category: "Home Goods", description: "A fun and cozy mermaid tail blanket for lounging on the couch. A great gift for all ages.", isBestSeller: true, sizes: ["Child", "Adult"], colors: ["Aqua/Teal", "Pink/Purple", "Rainbow"] },
            { id: 91, name: "Asymmetrical Poncho", price: 4700.00, imageUrl: "images/asymmetrical poncho.webp", isNew: true, category: "Apparel", description: "A modern and chic asymmetrical poncho with a stylish drape. Easy to wear and very fashionable.", sizes: ["One Size"], colors: ["Charcoal", "Oatmeal", "Plum"] },
            { id: 92, name: "Drawstring Pouch", price: 1600.00, imageUrl: "images/drawstring pouch.webp", isNew: false, category: "Accessories", description: "A small and useful drawstring pouch, perfect for storing jewelry, makeup, or your crochet notions." },
            { id: 93, name: "Lace Tunic", price: 4200.00, imageUrl: "images/lace tunic.jpg", isNew: true, category: "Apparel", description: "A beautiful and airy lace tunic, perfect as a beach cover-up or layered over a camisole and leggings.", sizes: ["S/M", "L/XL"], colors: ["White", "Black", "Beige"] },
            { id: 94, name: "Beret Hat", price: 2100.00, imageUrl: "images/beret hat.jpg", isNew: false, category: "Accessories", description: "A classic and chic crochet beret. Add a touch of Parisian style to your look.", colors: ["Red", "Black", "Gray", "Navy"] },
            { id: 95, name: "Sweater Dress", price: 6800.00, imageUrl: "images/sweater dress.jpg", isNew: true, category: "Apparel", description: "The ultimate cozy and stylish outfit. A warm, long-sleeved crochet sweater dress for the colder months.", sizes: ["S", "M", "L"], colors: ["Cream", "Gray", "Burgundy"] },
            { id: 96, name: "Midi Skirt", price: 4800.00, imageUrl: "images/midi skirt.jpg", isNew: false, category: "Apparel", description: "An elegant and versatile midi-length skirt. Can be styled for both casual and formal occasions.", sizes: ["S", "M", "L"], colors: ["Black", "Brown", "Olive"] },
            { id: 97, name: "Laptop Sleeve", price: 2800.00, imageUrl: "images/laptop sleeve.webp", isNew: true, category: "Accessories", description: "Protect your laptop with this soft and stylish handmade crochet sleeve. Padded for extra protection." },
            { id: 98, name: "Infinity Scarf", price: 2600.00, imageUrl: "images/infinity-scarf-crochet.jpeg.webp", isNew: false, category: "Accessories", description: "A continuous loop scarf that is easy to style and keeps you warm without loose ends. A winter staple.", colors: ["Teal", "Mustard", "Gray", "Cream"] },
            { id: 99, name: "Tank Top", price: 2200.00, imageUrl: "images/tank top.jpg", isNew: true, category: "Apparel", description: "A simple and classic crochet tank top. A must-have basic for any summer wardrobe.", sizes: ["S", "M", "L", "XL"], colors: ["White", "Black", "Gray", "Navy"] },
            { id: 100, name: "Floor Pouf", price: 7500.00, imageUrl: "images/floor pouf.jpg", isNew: true, category: "Home Goods", description: "A large, sturdy, and stylish crochet floor pouf. Perfect as extra seating or a comfortable footrest." }
        ]

        /**
         * Shows the specified page section and hides all others.
         * Updates navigation link active state.
         * @param {string} pageId - The ID of the page section to show.
         */
        function showPage(pageId) {
            // Hide all pages
            pageSections.forEach(page => page.classList.remove('active'));
            // Show the requested page
            const activePage = document.getElementById(pageId);
            if (activePage) {
                activePage.classList.add('active');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            // Update nav link active state
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('data-page') === pageId) {
                    link.classList.add('active');
                }
            });

            // Close all dropdowns
            const dropdowns = document.querySelectorAll('.dropdown-menu');
            dropdowns.forEach(dropdown => dropdown.classList.remove('active'));

            // Close mobile menu if open
            closeMobileMenu();
            // Re-render lists if navigating to their pages
            if (pageId === 'wishlist-page') {
                renderWishlist();
            } else if (pageId === 'cart-page') {
                renderCart();
            } else if (pageId === 'order-history-page') {
                renderOrderHistory();
            } else if (pageId === 'my-account-page') {
                // Future logic for the account page can go here
            }
        }

        /**
         * Toggles the visibility of a dropdown menu.
         * @param {string} dropdownId - The ID of the dropdown menu.
         */
        function toggleDropdown(dropdownId) {
            const dropdown = document.getElementById(dropdownId);
            dropdown.classList.toggle('active');
        }
        
        /**
         * Displays a temporary message box.
         * @param {string} message - The message to display.
         * @param {string} type - 'success' or 'error'
         */
        function showMessage(message, type = 'success') {
            messageBox.textContent = message;
            messageBox.classList.remove('bg-green-500', 'bg-red-500');
            messageBox.classList.add(type === 'success' ? 'bg-green-500' : 'bg-red-500');
            messageBox.classList.add('opacity-100');
            setTimeout(() => {
                messageBox.classList.remove('opacity-100');
            }, 3000);
        }

        // Event listeners for navigation
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const pageId = link.getAttribute('data-page');
                if (pageId) {
                    showPage(pageId);
                }
            });
        });

        // --- Mobile Menu Logic ---
        function openMobileMenu() {
            mobileMenuContainer.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            // Use requestAnimationFrame to ensure the transition happens after the element is displayed
            requestAnimationFrame(() => {
                mobileMenuOverlay.classList.remove('opacity-0');
                mobileMenu.classList.remove('-translate-x-full');
            });
        }

        function closeMobileMenu() {
            mobileMenuOverlay.classList.add('opacity-0');
            mobileMenu.classList.add('-translate-x-full');
            // Wait for the transition to finish before hiding the container
            setTimeout(() => {
                mobileMenuContainer.classList.add('hidden');
                document.body.style.overflow = '';
            }, 300); // Should match the transition duration
        }

        // Event listeners for mobile menu
        mobileMenuButton.addEventListener('click', openMobileMenu);
        mobileMenuCloseButton.addEventListener('click', closeMobileMenu);
        mobileMenuOverlay.addEventListener('click', closeMobileMenu);

        // --- Search Bar Logic ---
        const searchBar = document.getElementById('search-bar');
        const searchInput = document.getElementById('search-input');
        const searchResults = document.getElementById('search-results');
        const searchButtons = document.querySelectorAll('#search-button-desktop, #search-button-mobile');

        /**
         * Toggles the visibility of the search bar overlay.
         */
        function toggleSearchBar() {
            searchBar.classList.toggle('active');
            if (searchBar.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
                searchInput.focus();
            } else {
                document.body.style.overflow = '';
                searchInput.value = '';
                searchResults.innerHTML = '';
            }
            // Close mobile menu if it's open
            if (!mobileMenuContainer.classList.contains('hidden')) {
                closeMobileMenu();
            }
        }

        // Event listeners for search buttons
        searchButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                toggleSearchBar();
            });
        });

        // Event listener for Enter key in search input
        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                performSearch(searchInput.value);
            }
        });

        /**
         * Performs a placeholder search and displays results.
         * @param {string} query - The search query.
         */
        function performSearch(query) {
            if (query.trim() === '') {
                searchResults.innerHTML = '<p>Please enter a search query.</p>';
                return;
            }
            // A simple placeholder search. In a real app, this would query a database.
            const results = [
                { title: "Beginner's Guide to Single Crochet", page: "tutorials-page" },
                { title: "How to Read a Crochet Pattern", page: "tutorials-page" },
                { title: "5 Must-Have Hooks for Every Crocheter", page: "blog-page" },
                { title: "Merino Wool Yarn", page: "store-page" },
                { title: "Frequently Asked Questions", page: "faqs-page" },
                { title: "Customer Testimonials", page: "testimonials-page" }
            ].filter(item => item.title.toLowerCase().includes(query.toLowerCase()));

            if (results.length > 0) {
                searchResults.innerHTML = `
                    <h3 class="text-3xl font-bold text-amber-800 mb-4">Search Results for "${query}"</h3>
                    <div class="flex flex-col space-y-4 max-w-lg mx-auto">
                        ${results.map(result => `
                            <a href="#" class="block bg-gray-100 p-4 rounded-lg shadow-sm hover:bg-amber-100 transition-colors" onclick="showPage('${result.page}'); toggleSearchBar(); return false;">
                                <h4 class="text-xl font-semibold text-gray-800">${result.title}</h4>
                            </a>
                        `).join('')}
                    </div>
                `;
            } else {
                searchResults.innerHTML = `<p class="text-xl">No results found for "${query}".</p>`;
            }
        }

        // --- Store, Wishlist, & Shopping Cart Logic ---
        /**
         * Renders the new arrivals on the store page.
         */
        function renderNewArrivals() {
            const newArrivalsList = document.getElementById('new-arrivals-list');
            // Get the latest 8 new arrivals
            const newProducts = products.filter(p => p.isNew).slice(-8).reverse();
            
            newArrivalsList.innerHTML = newProducts.map(product => {
                return `
                <div class="bg-white rounded-lg shadow-sm overflow-hidden flex flex-col relative group transition-all duration-300 hover:shadow-lg hover:-translate-y-1 flex-shrink-0 w-full sm:w-1/2 md:w-1/3 lg:w-1/4">
                    <div class="relative">
                        <img src="${product.imageUrl}" alt="${product.name}" class="w-full h-48 object-cover cursor-pointer" onclick="openFeaturedImageModal('${product.imageUrl}')">
                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                            <button onclick="openQuickView(${product.id})" class="text-white bg-black bg-opacity-50 px-4 py-2 rounded-full font-semibold opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-2 group-hover:translate-y-0">Quick View</button>
                        </div>
                    </div>
                    <div class="p-4 flex flex-col flex-grow h-full">
                        <div class="flex-grow">
                            <h3 class="text-xl font-semibold text-gray-800">${product.name}</h3>
                            <p class="text-2xl font-bold text-amber-800 mt-2">Ksh ${product.price.toFixed(2)}</p>
                        </div>
                        <div class="flex items-center justify-between mt-4 space-x-2">
                             <button onclick="addToWishlist(${product.id})" class="text-gray-400 hover:text-red-500 transition-colors p-2 rounded-full" title="Add to Wishlist">
                                <i class="fas fa-heart text-xl"></i>
                            </button>
                            <button onclick="addToCart(${product.id})" class="bg-amber-700 text-white px-4 py-2 rounded-full font-semibold hover:bg-amber-800 transition-colors flex-grow">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
                `;
            }).join('');

            setupNewArrivalsCarousel();
        }

        /**
         * Sets up the logic for the new arrivals carousel.
         */
        function setupNewArrivalsCarousel() {
            const list = document.getElementById('new-arrivals-list');
            const prevBtn = document.getElementById('new-arrivals-prev');
            const nextBtn = document.getElementById('new-arrivals-next');
            let currentIndex = 0;

            const getVisibleItemsCount = () => {
                if (window.innerWidth >= 1024) return 4; // lg
                if (window.innerWidth >= 768) return 3;  // md
                if (window.innerWidth >= 640) return 2;  // sm
                return 1; // mobile
            };

            const updateTotalSlides = () => {
                const totalItems = list.children.length;
                const visibleItems = getVisibleItemsCount();
                return Math.max(0, totalItems - visibleItems);
            };

            const updateCarousel = () => {
                const itemWidth = list.children[0].offsetWidth;
                const gap = parseInt(window.getComputedStyle(list).gap);
                const totalWidth = itemWidth + gap;
                list.style.transform = `translateX(-${currentIndex * totalWidth}px)`;
                prevBtn.disabled = currentIndex === 0;
                nextBtn.disabled = currentIndex >= updateTotalSlides();
            };

            prevBtn.addEventListener('click', () => {
                if (currentIndex > 0) {
                    currentIndex--;
                    updateCarousel();
                }
            });

            nextBtn.addEventListener('click', () => {
                if (currentIndex < updateTotalSlides()) {
                    currentIndex++;
                    updateCarousel();
                }
            });

            // Initial setup and responsive handling
            window.addEventListener('resize', () => {
                // Reset index and update on resize to avoid issues
                currentIndex = 0;
                updateCarousel();
            });
            updateCarousel(); // Initial call
        }
        /**
         * Renders the best sellers on the home page.
         */
        function renderBestSellers() {
            const bestSellersList = document.getElementById('best-sellers-list');
            const bestSellerProducts = products.filter(p => p.isBestSeller).slice(0, 4);

            bestSellersList.innerHTML = bestSellerProducts.map(product => {
                return `
                <div class="bg-white rounded-lg shadow-sm overflow-hidden flex flex-col relative group transition-all duration-300 hover:shadow-lg hover:-translate-y-1 h-full">
                    <div class="relative">
                        <img src="${product.imageUrl}" alt="${product.name}" class="w-full h-48 object-cover cursor-pointer" onclick="openFeaturedImageModal('${product.imageUrl}')">
                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                            <button onclick="openQuickView(${product.id})" class="text-white bg-black bg-opacity-50 px-4 py-2 rounded-full font-semibold opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-2 group-hover:translate-y-0">Quick View</button>
                        </div>
                    </div>
                    <div class="p-4 flex flex-col flex-grow">
                        <div class="flex-grow">
                            <h3 class="text-xl font-semibold text-gray-800">${product.name}</h3>
                            <p class="text-2xl font-bold text-amber-800 mt-2">Ksh ${product.price.toFixed(2)}</p>
                        </div>
                        <div class="flex items-center justify-between mt-4 space-x-2">
                             <button onclick="addToWishlist(${product.id})" class="text-gray-400 hover:text-red-500 transition-colors p-2 rounded-full" title="Add to Wishlist">
                                <i class="fas fa-heart text-xl"></i>
                            </button>
                            <button onclick="addToCart(${product.id})" class="bg-amber-700 text-white px-4 py-2 rounded-full font-semibold hover:bg-amber-800 transition-colors flex-grow">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>`;
            }).join('');
        }
        /**
         * Renders the recently viewed products on the home page.
         */
        function renderRecentlyViewed() {
            const recentlyViewedSection = document.getElementById('recently-viewed-section');
            const recentlyViewedList = document.getElementById('recently-viewed-list');

            if (recentlyViewedIds.length === 0) {
                recentlyViewedSection.classList.add('hidden');
                return;
            }

            const viewedProducts = recentlyViewedIds.map(id => products.find(p => p.id === id)).filter(Boolean); // .filter(Boolean) removes any undefined if a product was deleted

            recentlyViewedList.innerHTML = viewedProducts.map(product => {
                return `
                <div class="bg-white rounded-lg shadow-sm overflow-hidden flex flex-col relative group transition-all duration-300 hover:shadow-lg hover:-translate-y-1 h-full">
                    <div class="relative">
                        <img src="${product.imageUrl}" alt="${product.name}" class="w-full h-48 object-cover cursor-pointer" onclick="openFeaturedImageModal('${product.imageUrl}')">
                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                            <button onclick="openQuickView(${product.id})" class="text-white bg-black bg-opacity-50 px-4 py-2 rounded-full font-semibold opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-2 group-hover:translate-y-0">Quick View</button>
                        </div>
                    </div>
                    <div class="p-4 flex flex-col flex-grow">
                        <div class="flex-grow">
                            <h3 class="text-xl font-semibold text-gray-800">${product.name}</h3>
                            <p class="text-2xl font-bold text-amber-800 mt-2">Ksh ${product.price.toFixed(2)}</p>
                        </div>
                        <div class="flex items-center justify-between mt-4 space-x-2">
                             <button onclick="addToWishlist(${product.id})" class="text-gray-400 hover:text-red-500 transition-colors p-2 rounded-full" title="Add to Wishlist">
                                <i class="fas fa-heart text-xl"></i>
                            </button>
                            <button onclick="addToCart(${product.id})" class="bg-amber-700 text-white px-4 py-2 rounded-full font-semibold hover:bg-amber-800 transition-colors flex-grow">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>`;
            }).join('');
            recentlyViewedSection.classList.remove('hidden');
        }
        /**
         * Renders the category filter buttons.
         */
        function renderCategoryFilters() {
            const categories = ['All', ...new Set(products.map(p => p.category))];
            const filterContainer = document.getElementById('category-filters');
            filterContainer.innerHTML = categories.map(category => `
                <button 
                    class="category-filter-btn px-4 py-2 rounded-full font-semibold border-2 border-amber-700 text-amber-800 hover:bg-amber-700 hover:text-white transition-colors"
                    data-category="${category}"
                >
                    ${category}
                </button>
            `).join('');

            // Add event listeners to the new buttons
            document.querySelectorAll('.category-filter-btn').forEach(button => {
                button.addEventListener('click', () => {
                    // Update active state for buttons
                    document.querySelectorAll('.category-filter-btn').forEach(btn => btn.classList.remove('bg-amber-700', 'text-white'));
                    button.classList.add('bg-amber-700', 'text-white');

                    // Filter products
                    currentPage = 1; // Reset to first page on category change
                    renderProducts(button.dataset.category);
                });
            });

            // Set 'All' as active by default
            const allButton = document.querySelector('.category-filter-btn[data-category="All"]');
            if (allButton) allButton.classList.add('bg-amber-700', 'text-white');
        }

        /**
         * Renders the product list on the store page.
         * @param {string} [category='All'] - The category to filter by.
         */
        function renderProducts(category = 'All') {
            const productSearchInput = document.getElementById('product-search-input');
            const searchQuery = productSearchInput.value.toLowerCase();
            const sortValue = document.getElementById('sort-filter').value;

            // 1. Filter by search query and category
            let filteredProducts = products.filter(product => 
                (category === 'All' || product.category === category) &&
                (product.name.toLowerCase().includes(searchQuery) || product.description.toLowerCase().includes(searchQuery))
            );

            // 2. Sort the filtered products
            let sortedProducts = [...filteredProducts]; // Create a copy to sort

            if (sortValue === 'price-asc') {
                sortedProducts.sort((a, b) => a.price - b.price);
            } else if (sortValue === 'price-desc') {
                sortedProducts.sort((a, b) => b.price - a.price);
            }

            // This function now just generates the HTML for a given list of products
            const generateProductHtml = (productsToRender) => productsToRender.map(product => {
                return `
                <div class="bg-white rounded-lg shadow-sm overflow-hidden flex flex-col relative group transition-all duration-300 hover:shadow-lg hover:-translate-y-1 h-full">
                    <div class="relative">
                        <img src="${product.imageUrl}" alt="${product.name}" class="w-full h-48 object-cover cursor-pointer" onclick="openFeaturedImageModal('${product.imageUrl}')">
                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                            <button onclick="openQuickView(${product.id})" class="text-white bg-black bg-opacity-50 px-4 py-2 rounded-full font-semibold opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-2 group-hover:translate-y-0">Quick View</button>
                        </div>
                    </div>
                    <div class="p-4 flex flex-col flex-grow">
                        <div class="flex-grow">
                            <h3 class="text-xl font-semibold text-gray-800">${product.name}</h3>
                            <p class="text-2xl font-bold text-amber-800 mt-2">Ksh ${product.price.toFixed(2)}</p>
                        </div>
                        <div class="flex items-center justify-between mt-4 space-x-2">
                             <button onclick="addToWishlist(${product.id})" class="text-gray-400 hover:text-red-500 transition-colors p-2 rounded-full" title="Add to Wishlist">
                                <i class="fas fa-heart text-xl"></i>
                            </button>
                            <button onclick="addToCart(${product.id})" class="bg-amber-700 text-white px-4 py-2 rounded-full font-semibold hover:bg-amber-800 transition-colors flex-grow">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
                `;
            }).join('');

            const productList = document.getElementById('product-list');
            const productsHeading = document.getElementById('all-products-heading');
            productsHeading.textContent = category === 'All' ? 'All Products' : category;

            if (sortedProducts.length === 0) {
                productList.innerHTML = `<p class="text-center text-gray-600 col-span-full">No products found matching your search.</p>`;
                renderPaginationControls(0, 0); // Clear pagination
                return;
            }

            // 3. Paginate the results
            const totalPages = Math.ceil(sortedProducts.length / ITEMS_PER_PAGE);
            const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;
            const endIndex = startIndex + ITEMS_PER_PAGE;
            const paginatedProducts = sortedProducts.slice(startIndex, endIndex);

            // 4. Render the current page of products and pagination controls
            productList.innerHTML = generateProductHtml(paginatedProducts);
            renderPaginationControls(totalPages, sortedProducts.length);
        }

        /**
         * Renders the pagination controls below the product list.
         * @param {number} totalPages - The total number of pages.
         * @param {number} totalItems - The total number of items being paginated.
         */
        function renderPaginationControls(totalPages, totalItems) {
            const paginationContainer = document.getElementById('pagination-controls');
            if (totalPages <= 1) {
                paginationContainer.innerHTML = ''; // No controls needed for 1 or 0 pages
                return;
            }

            let buttonsHtml = '';
            // Previous Button
            buttonsHtml += `<button onclick="changePage(${currentPage - 1})" class="px-4 py-2 rounded-lg border ${currentPage === 1 ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-white hover:bg-amber-100'}" ${currentPage === 1 ? 'disabled' : ''}>Prev</button>`;

            // Page Number Buttons
            for (let i = 1; i <= totalPages; i++) {
                buttonsHtml += `<button onclick="changePage(${i})" class="px-4 py-2 rounded-lg border ${currentPage === i ? 'bg-amber-700 text-white border-amber-700' : 'bg-white hover:bg-amber-100'}">${i}</button>`;
            }

            // Next Button
            buttonsHtml += `<button onclick="changePage(${currentPage + 1})" class="px-4 py-2 rounded-lg border ${currentPage === totalPages ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-white hover:bg-amber-100'}" ${currentPage === totalPages ? 'disabled' : ''}>Next</button>`;

            paginationContainer.innerHTML = buttonsHtml;
        }

        /**
         * Changes the current page and re-renders the product list.
         * @param {number} newPage - The new page number to display.
         */
        function changePage(newPage) {
            currentPage = newPage;
            // Get the currently active category to re-render with the correct filter
            const activeCategoryButton = document.querySelector('.category-filter-btn.bg-amber-700.text-white');
            const currentCategory = activeCategoryButton ? activeCategoryButton.dataset.category : 'All';
            renderProducts(currentCategory);
            // Scroll to the top of the product list
            const productListTop = document.getElementById('all-products-heading').offsetTop;
            window.scrollTo({ top: productListTop - 80, behavior: 'smooth' }); // Adjust for header height
        }
        
        /**
         * Adds an item to the shopping cart.
         * @param {number} productId - The ID of the product to add.
         * @param {string} [size] - The selected size.
         * @param {string} [color] - The selected color.
         */
        function addToCart(productId, size = null, color = null) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            // Create a unique ID for the cart item based on product, size, and color
            const cartItemId = `${productId}-${size || 'none'}-${color || 'none'}`;

            const existingItem = cartItems.find(item => item.cartItemId === cartItemId);

            if (existingItem) {
                existingItem.quantity++;
            } else {
                cartItems.push({ ...product, quantity: 1, selectedSize: size, selectedColor: color, cartItemId: cartItemId });
            }

            // If adding from quick view, close it
            if (document.getElementById('quick-view-modal').classList.contains('active')) closeQuickView();

            updateCartCount();
            renderCart();
            showMessage(`${product.name} added to cart!`);
        }
        
        /**
         * Adds an item to the wishlist.
         * @param {number} productId - The ID of the product to add.
         */
        function addToWishlist(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const existingItem = wishlistItems.find(item => item.id === productId);
            if (existingItem) {
                showMessage(`${product.name} is already in your wishlist.`, 'error');
            } else {
                wishlistItems.push({ ...product });
                updateWishlistCount();
                renderWishlist();
                showMessage(`${product.name} added to wishlist!`);
            }
        }

        /**
         * Removes an item from the shopping cart.
         * @param {number} productId - The ID of the item to remove.
         */ // Note: This is now cartItemId
        function removeFromCart(cartItemId) {
            const itemIndex = cartItems.findIndex(item => item.cartItemId === cartItemId);
            if (itemIndex > -1) {
                cartItems.splice(itemIndex, 1);
            }
            updateCartCount();
            renderCart();
        }
        
        /**
         * Removes an item from the wishlist.
         * @param {number} productId - The ID of the item to remove.
         */
        function removeFromWishlist(productId) {
            const itemIndex = wishlistItems.findIndex(item => item.id === productId);
            if (itemIndex > -1) {
                wishlistItems.splice(itemIndex, 1);
            }
            updateWishlistCount();
            renderWishlist();
        }


        /**
         * Clears all items from the shopping cart.
         */
        function clearCart() {
            if (cartItems.length > 0) {
                cartItems.length = 0; // Clear the array
                updateCartCount();
                renderCart();
                showMessage('Your cart has been cleared.', 'success');
            } else {
                showMessage('Your cart is already empty.', 'error');
            }
        }

        /**
         * Renders the shopping cart page with current items.
         */
        function renderCart() {
            const cartContainer = document.getElementById('cart-items-container');
            const cartSubtotal = document.getElementById('cart-subtotal');
            const cartTotal = document.getElementById('cart-total');

            if (cartItems.length === 0) {
                cartContainer.innerHTML = '<p class="text-center text-gray-800 text-xl">Your cart is empty.</p>';
                cartSubtotal.textContent = 'Ksh 0.00';
                cartTotal.textContent = 'Ksh 0.00';
                return;
            }

            const cartHtml = cartItems.map(item => `
                <div class="flex items-center justify-between py-4 border-b border-gray-200">
                    <div class="flex items-center">
                        <img src="${item.imageUrl}" alt="${item.name}" class="w-20 h-20 rounded-lg object-cover mr-4 flex-shrink-0">
                        <div>
                            <h4 class="text-xl font-semibold text-gray-800">${item.name}</h4>
                            <div class="text-sm text-gray-600">
                                ${item.selectedSize ? `<span>Size: ${item.selectedSize}</span>` : ''}
                                ${item.selectedSize && item.selectedColor ? `<span class="mx-2">|</span>` : ''}
                                ${item.selectedColor ? `<span>Color: ${item.selectedColor}</span>` : ''}
                            </div>
                            <p class="text-gray-800 mt-1">Price: Ksh ${item.price.toFixed(2)}</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-xl font-bold text-gray-800">x${item.quantity}</span>
                        <p class="text-xl font-bold text-amber-800">Ksh ${(item.price * item.quantity).toFixed(2)}</p>
                        <button onclick="removeFromCart('${item.cartItemId}')" class="text-red-500 hover:text-red-700 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.013 21H7.987a2 2 0 01-1.92-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                        </button>
                    </div>
                </div>
            `).join('');

            cartContainer.innerHTML = cartHtml;

            const subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartSubtotal.textContent = `Ksh ${subtotal.toFixed(2)}`;
            cartTotal.textContent = `Ksh ${(subtotal * 1.05).toFixed(2)}`; // Example: 5% tax
        }
        
        /**
         * Renders the wishlist page with current items.
         */
        function renderWishlist() {
            const wishlistContainer = document.getElementById('wishlist-items-container');

            if (wishlistItems.length === 0) {
                wishlistContainer.innerHTML = '<p class="text-center text-gray-800 text-xl">Your wishlist is empty.</p>';
                return;
            }
            
            const wishlistHtml = wishlistItems.map(item => `
                 <div class="bg-white rounded-lg shadow-sm overflow-hidden flex flex-col relative">
                    <img src="${item.imageUrl}" alt="${item.name}" class="w-full h-48 object-cover">
                    <div class="p-4 flex flex-col flex-grow">
                        <h3 class="text-xl font-semibold text-gray-800 flex-grow">${item.name}</h3>
                        <p class="text-2xl font-bold text-amber-800 mt-2">Ksh ${item.price.toFixed(2)}</p>
                        <div class="flex items-center justify-between mt-4 space-x-2">
                             <button onclick="removeFromWishlist(${item.id})" class="text-red-500 hover:text-red-600 transition-colors p-2 rounded-full" title="Remove from Wishlist">
                                <i class="fas fa-trash-alt text-xl"></i>
                            </button>
                            <button onclick="addToCart(${item.id}); showPage('cart-page');" class="bg-amber-700 text-white px-4 py-2 rounded-full font-semibold hover:bg-amber-800 transition-colors flex-grow">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');

            wishlistContainer.innerHTML = wishlistHtml;
        }

        /**
         * Updates the cart count displayed in the header.
         */
        function updateCartCount() {
            const count = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cart-count').textContent = count;
            document.getElementById('mobile-cart-count').textContent = count;
        }
        
        /**
         * Updates the wishlist count displayed in the header.
         */
        function updateWishlistCount() {
            const count = wishlistItems.length;
            document.getElementById('wishlist-count').textContent = count;
            document.getElementById('mobile-wishlist-count').textContent = count;
        }


        /**
         * Initiates the checkout process by generating an order summary and showing the checkout modal.
         */
        function checkout() {
            if (cartItems.length === 0) {
                showMessage('Your cart is empty!', 'error');
                return;
            }

            const checkoutSummaryContainer = document.getElementById('checkout-summary');
            const subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const total = subtotal * 1.05; // Example 5% tax

            let orderText = "Hello Cheryl's Crochet, I would like to place the following order:\n\n";
            
            checkoutSummaryContainer.innerHTML = cartItems.map(item => {
                const itemTotal = item.price * item.quantity;
                let itemDetails = `- ${item.name}`;
                if (item.selectedSize) itemDetails += ` (Size: ${item.selectedSize})`;
                if (item.selectedColor) itemDetails += ` (Color: ${item.selectedColor})`;
                itemDetails += ` (x${item.quantity}) - Ksh ${itemTotal.toFixed(2)}\n`;
                orderText += itemDetails;
                return `
                    <div class="flex justify-between items-center py-2">
                        <span class="text-gray-800">${item.name} x ${item.quantity}</span>
                        <span class="font-semibold text-gray-800">Ksh ${itemTotal.toFixed(2)}</span>
                    </div>
                `;
            }).join('');

            checkoutSummaryContainer.innerHTML += `
                <div class="flex justify-between items-center pt-4 mt-4 border-t">
                    <span class="text-lg font-bold text-amber-800">Total (incl. tax)</span>
                    <span class="text-lg font-bold text-amber-800">Ksh ${total.toFixed(2)}</span>
                </div>
            `;

            orderText += `\nTotal: Ksh ${total.toFixed(2)}\n\nThank you!`;

            // Update WhatsApp and Email links
            const businessPhoneNumber = "254769012520"; // Kenyan country code + number without leading 0
            const businessEmail = "info@cheryls-crochet.com";
            document.getElementById('whatsapp-link').href = `https://wa.me/${businessPhoneNumber}?text=${encodeURIComponent(orderText)}`;
            document.getElementById('email-link').href = `mailto:${businessEmail}?subject=New Order from Cheryl's Crochet&body=${encodeURIComponent(orderText)}`;

            // Show the modal
            document.getElementById('checkout-modal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        /**
         * Closes the checkout modal.
         */
        function closeCheckoutModal() {
            document.getElementById('checkout-modal').classList.remove('active');
            document.body.style.overflow = '';
        }

        /**
         * Finalizes the order, saves it to history, and clears the cart.
         */
        function finalizeOrder() {
            if (cartItems.length === 0) {
                // This should not happen if the checkout button is disabled, but as a safeguard.
                showMessage('Your cart is empty.', 'error');
                return;
            }

            const subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const total = subtotal * 1.05; // Example 5% tax

            const newOrder = {
                id: Date.now(), // Simple unique ID
                date: new Date().toLocaleDateString(),
                items: [...cartItems], // Create a copy of the items
                total: total
            };

            orderHistory.unshift(newOrder); // Add to the beginning of the history
            saveOrderHistoryToLocalStorage();
            clearCart();
            closeCheckoutModal();
            showMessage('Order placed successfully! Check your history.', 'success');
        }

        /**
         * Renders the order history page.
         */
        function renderOrderHistory() {
            const container = document.getElementById('order-history-container');
            if (orderHistory.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-600 text-xl">You have no past orders.</p>';
                return;
            }

            container.innerHTML = orderHistory.map(order => `
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <div class="flex justify-between items-center border-b pb-4 mb-4">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-800">Order #${order.id}</h3>
                            <p class="text-gray-600">Placed on: ${order.date}</p>
                        </div>
                        <p class="text-2xl font-bold text-amber-800">Total: Ksh ${order.total.toFixed(2)}</p>
                    </div>
                    <div class="space-y-3">
                        ${order.items.map(item => `
                            <div class="flex items-center">
                                <img src="${item.imageUrl}" alt="${item.name}" class="w-12 h-12 rounded-md object-cover mr-4">
                                <div class="flex-grow">
                                    <p class="font-semibold text-gray-800">${item.name}</p>
                                    <p class="text-sm text-gray-600">Quantity: ${item.quantity}</p>
                                </div>
                                <p class="font-semibold text-gray-700">Ksh ${(item.price * item.quantity).toFixed(2)}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        /**
         * Opens the quick view modal for a specific product.
         * @param {number} productId - The ID of the product to view.
         */
        function openQuickView(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const modal = document.getElementById('quick-view-modal');
            const contentContainer = document.getElementById('quick-view-content');

            // --- Add to Recently Viewed Logic ---
            // Remove the ID if it already exists to move it to the front
            recentlyViewedIds = recentlyViewedIds.filter(id => id !== productId);
            // Add the new ID to the beginning of the array
            recentlyViewedIds.unshift(productId);
            // Keep only the last 4 unique items
            if (recentlyViewedIds.length > 4) {
                recentlyViewedIds = recentlyViewedIds.slice(0, 4);
            }
            // Save to localStorage and re-render the section
            saveRecentlyViewedToLocalStorage();
            renderRecentlyViewed();
            // --- End Recently Viewed Logic ---

            // Main product details
            let optionsHtml = '';
            if (product.sizes && product.sizes.length > 0) {
                optionsHtml += `
                    <div class="mt-6">
                        <h4 class="text-lg font-semibold text-gray-800 mb-2">Size:</h4>
                        <div id="quick-view-sizes" class="flex flex-wrap gap-2">
                            ${product.sizes.map((size, index) => `
                                <button class="size-option px-4 py-2 border rounded-lg hover:border-amber-700 hover:text-amber-800 transition-colors ${index === 0 ? 'border-amber-700 text-amber-800 font-semibold' : ''}" data-size="${size}">${size}</button>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            if (product.colors && product.colors.length > 0) {
                optionsHtml += `
                    <div class="mt-6">
                        <h4 class="text-lg font-semibold text-gray-800 mb-2">Color:</h4>
                        <div id="quick-view-colors" class="flex flex-wrap gap-2">
                            ${product.colors.map((color, index) => `
                                <button class="color-option px-4 py-2 border rounded-lg hover:border-amber-700 hover:text-amber-800 transition-colors ${index === 0 ? 'border-amber-700 text-amber-800 font-semibold' : ''}" data-color="${color}">${color}</button>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            // The Add to Cart button needs to be able to get the selected options
            const addToCartButtonHtml = `<button onclick="handleQuickViewAddToCart(${product.id})" class="bg-amber-700 text-white px-6 py-3 rounded-full font-semibold hover:bg-amber-800 transition-colors flex-grow">
                Add to Cart
            </button>`;


            contentContainer.innerHTML = `
                <div>
                    <img src="${product.imageUrl}" alt="${product.name}" class="w-full h-auto rounded-lg shadow-md">
                </div>
                <div class="flex flex-col">
                    <h3 class="text-4xl font-bold text-amber-800 font-heading">${product.name}</h3>
                    <p class="text-3xl font-bold text-amber-800 my-4">Ksh ${product.price.toFixed(2)}</p>
                    <p class="text-gray-700 text-lg mb-4 flex-grow">${product.description}</p>
                    ${optionsHtml}
                    <div class="flex items-center justify-between mt-4 space-x-4">
                        <button onclick="addToWishlist(${product.id})" class="text-gray-400 hover:text-red-500 transition-colors p-3 rounded-full border" title="Add to Wishlist">
                            <i class="fas fa-heart text-xl"></i>
                        </button>
                        ${addToCartButtonHtml}
                    </div>
                </div>
                <!-- Reviews Section -->
                <div class="md:col-span-2 mt-8 border-t pt-8">
                    <h4 class="text-3xl font-bold text-amber-800 mb-6 font-heading">Customer Reviews</h4>
                    <div id="product-reviews" class="space-y-6 mb-8">
                        <!-- Reviews will be rendered here -->
                    </div>

                    <h4 class="text-2xl font-bold text-gray-800 mb-4">Leave a Review</h4>
                    <form id="review-form" class="space-y-4" data-product-id="${product.id}">
                        <div>
                            <label for="reviewer-name" class="block text-gray-700 font-medium mb-1">Your Name</label>
                            <input type="text" id="reviewer-name" class="w-full px-4 py-2 border rounded-lg focus:ring focus:ring-amber-200 focus:outline-none" placeholder="John Doe" required>
                        </div>
                        <div>
                            <label for="review-rating" class="block text-gray-700 font-medium mb-1">Rating (1-5 Stars)</label>
                            <input type="number" id="review-rating" class="w-full px-4 py-2 border rounded-lg focus:ring focus:ring-amber-200 focus:outline-none" min="1" max="5" placeholder="5" required>
                        </div>
                        <div>
                            <label for="review-comment" class="block text-gray-700 font-medium mb-1">Your Comment</label>
                            <textarea id="review-comment" rows="4" class="w-full px-4 py-2 border rounded-lg focus:ring focus:ring-amber-200 focus:outline-none" placeholder="This product is amazing..." required></textarea>
                        </div>
                        <button type="submit" class="w-full bg-amber-700 text-white px-6 py-3 rounded-full font-semibold hover:bg-amber-800 transition-colors">
                            Submit Review
                        </button>
                    </form>
                </div>
            `;

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';

            // Render existing reviews
            renderProductReviews(product.id);

            // Attach event listener for the review form
            document.getElementById('review-form').addEventListener('submit', submitProductReview);
        }
        
        /**
         * Handles adding a product to the cart from the quick view modal, including selected options.
         * @param {number} productId - The ID of the product to add.
         */
        function handleQuickViewAddToCart(productId) {
            const selectedSizeEl = document.querySelector('#quick-view-sizes .font-semibold');
            const selectedColorEl = document.querySelector('#quick-view-colors .font-semibold');

            const size = selectedSizeEl ? selectedSizeEl.dataset.size : null;
            const color = selectedColorEl ? selectedColorEl.dataset.color : null;

            addToCart(productId, size, color);
        }

        // Add event delegation for size/color options in quick view
        document.getElementById('quick-view-modal').addEventListener('click', (e) => {
            // Handle size selection
            if (e.target.classList.contains('size-option')) {
                document.querySelectorAll('.size-option').forEach(btn => btn.classList.remove('border-amber-700', 'text-amber-800', 'font-semibold'));
                e.target.classList.add('border-amber-700', 'text-amber-800', 'font-semibold');
            }
            // Handle color selection
            if (e.target.classList.contains('color-option')) {
                document.querySelectorAll('.color-option').forEach(btn => btn.classList.remove('border-amber-700', 'text-amber-800', 'font-semibold'));
                e.target.classList.add('border-amber-700', 'text-amber-800', 'font-semibold');
            }
        });





        /**
         * Renders the reviews for a specific product.
         * @param {number} productId - The ID of the product whose reviews to render.
         */
        function renderProductReviews(productId) {
            const product = products.find(p => p.id === productId);
            const reviewsContainer = document.getElementById('product-reviews');
            
            if (!product || !product.reviews || product.reviews.length === 0) {
                reviewsContainer.innerHTML = '<p class="text-gray-600">No reviews yet. Be the first to leave one!</p>';
                return;
            }

            reviewsContainer.innerHTML = product.reviews.map((review, index) => `
                <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="flex items-center mb-2">
                                <p class="font-semibold text-gray-800 mr-2">${review.name}</p>
                                <div class="text-amber-500">
                                    ${'★'.repeat(review.rating)}${'☆'.repeat(5 - review.rating)}
                                </div>
                            </div>
                            <p class="text-gray-700">${review.comment}</p>
                        </div>
                        <button onclick="deleteProductReview(${productId}, ${index})" class="text-red-500 hover:text-red-700 transition-colors text-sm font-semibold" title="Delete this review">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        /**
         * Handles the submission of a new product review.
         * @param {Event} event - The submit event from the form.
         */
        function submitProductReview(event) {
            event.preventDefault();
            const form = event.target;
            const productId = parseInt(form.dataset.productId);
            const name = document.getElementById('reviewer-name').value;
            const rating = parseInt(document.getElementById('review-rating').value);
            const comment = document.getElementById('review-comment').value;

            const product = products.find(p => p.id === productId);
            if (product) {
                if (!product.reviews) product.reviews = []; // Initialize if not present
                product.reviews.push({ name, rating, comment });
                renderProductReviews(productId); // Re-render reviews
                form.reset(); // Clear the form
                saveReviewsToLocalStorage(); // Save updated reviews
                showMessage('Review submitted successfully!', 'success');
            } else {
                showMessage('Error: Product not found for review.', 'error');
            }
        }

        /**
         * Deletes a specific product review.
         * @param {number} productId - The ID of the product.
         * @param {number} reviewIndex - The index of the review to delete.
         */
        function deleteProductReview(productId, reviewIndex) {
            const product = products.find(p => p.id === productId);
            if (product && product.reviews && product.reviews[reviewIndex]) {
                product.reviews.splice(reviewIndex, 1); // Remove the review from the array
                renderProductReviews(productId); // Re-render the reviews list
                saveReviewsToLocalStorage(); // Save updated reviews
                showMessage('Review deleted successfully!', 'success');
            } else {
                showMessage('Error: Could not delete review.', 'error');
            }
        }

        /**
         * Saves the current state of all product reviews to local storage.
         */
        function saveReviewsToLocalStorage() {
            // Extract only the ID and reviews from products that have them
            const reviewsToSave = products
                .filter(product => product.reviews && product.reviews.length > 0)
                .map(product => ({ id: product.id, reviews: product.reviews }));

            localStorage.setItem('cherylCrotchetReviews', JSON.stringify(reviewsToSave));
        }

        /**
         * Loads product reviews from local storage and merges them into the main products array.
         */
        function loadReviewsFromLocalStorage() {
            const savedReviews = localStorage.getItem('cherylCrotchetReviews');
            if (savedReviews) {
                const parsedReviews = JSON.parse(savedReviews);
                parsedReviews.forEach(savedProduct => {
                    const productInMemory = products.find(p => p.id === savedProduct.id);
                    if (productInMemory) {
                        // Replace the initial reviews with the saved ones
                        productInMemory.reviews = savedProduct.reviews;
                    }
                });
            }
        }

        /**
         * Saves the recently viewed items to local storage.
         */
        function saveRecentlyViewedToLocalStorage() {
            localStorage.setItem('cherylCrotchetRecentlyViewed', JSON.stringify(recentlyViewedIds));
        }

        /**
         * Loads the recently viewed items from local storage.
         */
        function loadRecentlyViewedFromLocalStorage() {
            const savedItems = localStorage.getItem('cherylCrotchetRecentlyViewed');
            if (savedItems) {
                recentlyViewedIds = JSON.parse(savedItems);
            }
        }
        /**
         * Saves the order history to local storage.
         */
        function saveOrderHistoryToLocalStorage() {
            localStorage.setItem('cherylCrotchetOrderHistory', JSON.stringify(orderHistory));
        }

        /**
         * Loads the order history from local storage.
         */
        function loadOrderHistoryFromLocalStorage() {
            const savedOrders = localStorage.getItem('cherylCrotchetOrderHistory');
            if (savedOrders) {
                orderHistory = JSON.parse(savedOrders);
            }
        }

        /**
         * Closes the quick view modal.
         */
        function closeQuickView() {
            const modal = document.getElementById('quick-view-modal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close modal if clicking on the background overlay
        document.getElementById('quick-view-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeQuickView();
            }
        });

        // --- Featured Image Modal Logic ---
        const featuredImageModal = document.getElementById('featured-image-modal');
        const featuredModalImg = document.getElementById('featured-modal-img');

        /**
         * Opens the featured image modal with a specific image.
         * @param {string} imageUrl - The URL of the image to display.
         */
        function openFeaturedImageModal(imageUrl) {
            if (featuredImageModal && featuredModalImg) {
                featuredModalImg.src = imageUrl;
                featuredImageModal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        /**
         * Closes the featured image modal.
         */
        function closeFeaturedImageModal() {
            if (featuredImageModal) {
                featuredImageModal.classList.remove('active');
                featuredModalImg.src = ""; // Clear src to prevent flash of old image
                document.body.style.overflow = '';
            }
        }

        // --- Auth Modal Logic ---
        const authModal = document.getElementById('auth-modal');
        const loginFormContainer = document.getElementById('login-form-container');
        const registerFormContainer = document.getElementById('register-form-container');

        /**
         * Opens the authentication modal.
         * @param {string} [view='login'] - The view to show ('login' or 'register').
         */
        function openAuthModal(view = 'login') {
            authModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            switchAuthView(view);
        }

        /**
         * Closes the authentication modal.
         */
        function closeAuthModal() {
            authModal.classList.remove('active');
            document.body.style.overflow = '';
        }

        /**
         * Switches between the login and register forms within the modal.
         * @param {string} viewToShow - The view to show ('login' or 'register').
         */
        function switchAuthView(viewToShow) {
            if (viewToShow === 'register') {
                loginFormContainer.style.display = 'none';
                registerFormContainer.style.display = 'block';
            } else {
                loginFormContainer.style.display = 'block';
                registerFormContainer.style.display = 'none';
            }
        }

        // Placeholder form submission handlers
        document.getElementById('login-form').addEventListener('submit', (e) => {
            e.preventDefault();
            console.log('Login attempt');
            showMessage('Logged in successfully! (simulation)');
            closeAuthModal();
        });
        document.getElementById('register-form').addEventListener('submit', (e) => {
            e.preventDefault();
            console.log('Registration attempt');
            showMessage('Account created successfully! (simulation)');
            closeAuthModal();
        });

        // --- Account Page Logic ---
        document.getElementById('account-details-form').addEventListener('submit', (e) => {
            e.preventDefault();
            // In a real app, this would send data to a server
            const name = document.getElementById('account-name').value;
            const email = document.getElementById('account-email').value;
            console.log('Updating account details for:', { name, email });
            showMessage('Account details updated successfully! (simulation)');
        });

        /**
         * Logs the user out (simulation).
         */
        function logout() {
            // In a real app, this would clear session/token
            console.log('User logged out.');
            showMessage('You have been logged out.');
            showPage('home-page'); // Redirect to home page
        }
        /**
         * Opens a policy modal.
         * @param {string} modalId - The ID of the modal to open.
         */
        function openPolicyModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        /**
         * Closes a policy modal.
         * @param {string} modalId - The ID of the modal to close.
         */
        function closePolicyModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }

        // --- Contact Form Logic ---
        const contactForm = document.getElementById('contact-form');
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('contact-name').value;
            const email = document.getElementById('contact-email').value;
            const message = document.getElementById('contact-message').value;

            // In a real application, you would send this data to a server
            console.log('Form submitted!', { name, email, message });
            showMessage('Message sent successfully! We will get back to you soon.');

            // Clear the form
            contactForm.reset();
        });
        
        // --- Back to Top Button Logic ---
        const backToTopBtn = document.getElementById('back-to-top-btn');

        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) { // Show button after scrolling 300px
                backToTopBtn.classList.remove('hidden');
                backToTopBtn.classList.add('flex');
            } else {
                backToTopBtn.classList.add('hidden');
                backToTopBtn.classList.remove('flex');
            }
        });

        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });


        // Expose functions to the global scope for onclick attributes
        window.showPage = showPage;
        window.toggleSearchBar = toggleSearchBar;
        window.toggleDropdown = toggleDropdown;
        window.addToCart = addToCart;
        window.removeFromCart = removeFromCart;
        window.clearCart = clearCart;
        window.checkout = checkout;
        window.closeCheckoutModal = closeCheckoutModal;
        window.addToWishlist = addToWishlist;
        window.removeFromWishlist = removeFromWishlist;
        window.finalizeOrder = finalizeOrder;
        window.handleQuickViewAddToCart = handleQuickViewAddToCart;
        window.openQuickView = openQuickView;
        window.closeQuickView = closeQuickView;
        window.openFeaturedImageModal = openFeaturedImageModal;
        window.submitProductReview = submitProductReview; // Expose for form submission
        window.deleteProductReview = deleteProductReview;
        window.closeFeaturedImageModal = closeFeaturedImageModal;
        window.openPolicyModal = openPolicyModal;
        window.closePolicyModal = closePolicyModal;
        window.openAuthModal = openAuthModal;
        window.closeAuthModal = closeAuthModal;
        window.switchAuthView = switchAuthView;
        window.changePage = changePage;
        window.logout = logout;
        
        // Initial setup on page load
        window.onload = () => {
            // Load any saved reviews from local storage first
            loadReviewsFromLocalStorage();
            loadRecentlyViewedFromLocalStorage();
            loadOrderHistoryFromLocalStorage();

            renderProducts();
            renderCategoryFilters();
            renderNewArrivals();
            renderBestSellers();
            renderRecentlyViewed();
            renderCart();
            renderWishlist();
            updateWishlistCount();
            showPage('home-page');
            document.querySelector('.nav-link[data-page="home-page"]').classList.add('active');
            

            // Add event listener for the sort filter
            const sortFilter = document.getElementById('sort-filter');
            sortFilter.addEventListener('change', () => {
                currentPage = 1; // Reset to first page on sort change
                renderProducts(document.querySelector('.category-filter-btn.bg-amber-700')?.dataset.category || 'All');
            });

            // Add event listener for the product search input
            const productSearchInput = document.getElementById('product-search-input');
            productSearchInput.addEventListener('input', () => {
                currentPage = 1; // Reset to first page on search
                renderProducts(document.querySelector('.category-filter-btn.bg-amber-700')?.dataset.category || 'All');
            });
        };

    </script>
</body>
</html>
